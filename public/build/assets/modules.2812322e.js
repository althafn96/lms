var De=Object.defineProperty;var ue=Object.getOwnPropertySymbols;var Ve=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var me=(n,s,l)=>s in n?De(n,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[s]=l,J=(n,s)=>{for(var l in s||(s={}))Ve.call(s,l)&&me(n,l,s[l]);if(ue)for(var l of ue(s))Le.call(s,l)&&me(n,l,s[l]);return n};import{a0 as Re,k as X,u as Ee,N as U,y as N,U as xe,g as Ce,a7 as Ue,r as Te,i as g,l as y,m as e,n as I,p as ee,q as f,F as T,v as O,t as j,O as D,P as w,Q as F,Z as ie,W as ve,x as S}from"./vendor.9ac200cc.js";import{u as Oe,a as je}from"./app.52277fe1.js";import{v as Ae}from"./useValidator.4107c1a7.js";import"./Bootstrap5.88c59918.js";var A={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createModule"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"course_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"lessons"}},type:{kind:"NamedType",name:{kind:"Name",value:"ModuleLessonHasMany"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createModule"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"ObjectField",name:{kind:"Name",value:"course_id"},value:{kind:"Variable",name:{kind:"Name",value:"course_id"}}},{kind:"ObjectField",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}},{kind:"ObjectField",name:{kind:"Name",value:"lessons"},value:{kind:"Variable",name:{kind:"Name",value:"lessons"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lessons"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"period"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"files"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"getPathUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:599}};A.loc.source={body:`mutation createModule (\r
    $name: String!,\r
    $course_id: ID!,\r
    $description: String,\r
    $lessons: ModuleLessonHasMany\r
) {\r
    createModule (\r
        input: {\r
            name: $name,\r
            course_id: $course_id,\r
            description: $description,\r
            lessons: $lessons\r
        }\r
    ) {\r
        id\r
        name\r
        description\r
        lessons {\r
            id\r
            title\r
            description\r
            period\r
            files {\r
                id\r
                getPathUrl\r
                name\r
            }\r
        }\r
    }\r
}\r
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function P(n,s){if(n.kind==="FragmentSpread")s.add(n.name.value);else if(n.kind==="VariableDefinition"){var l=n.type;l.kind==="NamedType"&&s.add(l.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(o){P(o,s)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(o){P(o,s)}),n.definitions&&n.definitions.forEach(function(o){P(o,s)})}var ne={};(function(){A.definitions.forEach(function(s){if(s.name){var l=new Set;P(s,l),ne[s.name.value]=l}})})();function fe(n,s){for(var l=0;l<n.definitions.length;l++){var o=n.definitions[l];if(o.name&&o.name.value==s)return o}}function Pe(n,s){var l={kind:n.kind,definitions:[fe(n,s)]};n.hasOwnProperty("loc")&&(l.loc=n.loc);var o=ne[s]||new Set,h=new Set,p=new Set;for(o.forEach(function(m){p.add(m)});p.size>0;){var M=p;p=new Set,M.forEach(function(m){if(!h.has(m)){h.add(m);var k=ne[m]||new Set;k.forEach(function($){p.add($)})}})}return h.forEach(function(m){var k=fe(n,m);k&&l.definitions.push(k)}),l}Pe(A,"createModule");var B={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateModule"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"course_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"lessons"}},type:{kind:"NamedType",name:{kind:"Name",value:"ModuleLessonHasMany"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateModule"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"ObjectField",name:{kind:"Name",value:"course_id"},value:{kind:"Variable",name:{kind:"Name",value:"course_id"}}},{kind:"ObjectField",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}},{kind:"ObjectField",name:{kind:"Name",value:"lessons"},value:{kind:"Variable",name:{kind:"Name",value:"lessons"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lessons"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"period"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"files"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"getPathUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:632}};B.loc.source={body:`mutation updateModule (\r
    $id: ID!,\r
    $course_id: ID!,\r
    $name: String!,\r
    $description: String,\r
    $lessons: ModuleLessonHasMany\r
) {\r
    updateModule (\r
        id: $id,\r
        input: {\r
            name: $name,\r
            course_id: $course_id,\r
            description: $description,\r
            lessons: $lessons\r
        }\r
    ) {\r
        id\r
        name\r
        description\r
        lessons {\r
            id\r
            title\r
            description\r
            period\r
            files {\r
                id\r
                getPathUrl\r
                name\r
            }\r
        }\r
    }\r
}\r
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function q(n,s){if(n.kind==="FragmentSpread")s.add(n.name.value);else if(n.kind==="VariableDefinition"){var l=n.type;l.kind==="NamedType"&&s.add(l.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(o){q(o,s)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(o){q(o,s)}),n.definitions&&n.definitions.forEach(function(o){q(o,s)})}var te={};(function(){B.definitions.forEach(function(s){if(s.name){var l=new Set;q(s,l),te[s.name.value]=l}})})();function pe(n,s){for(var l=0;l<n.definitions.length;l++){var o=n.definitions[l];if(o.name&&o.name.value==s)return o}}function Be(n,s){var l={kind:n.kind,definitions:[pe(n,s)]};n.hasOwnProperty("loc")&&(l.loc=n.loc);var o=te[s]||new Set,h=new Set,p=new Set;for(o.forEach(function(m){p.add(m)});p.size>0;){var M=p;p=new Set,M.forEach(function(m){if(!h.has(m)){h.add(m);var k=te[m]||new Set;k.forEach(function($){p.add($)})}})}return h.forEach(function(m){var k=pe(n,m);k&&l.definitions.push(k)}),l}Be(B,"updateModule");var Q={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"removeModule"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteModule"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:126}};Q.loc.source={body:`mutation removeModule (\r
    $id: ID!\r
) {\r
    deleteModule (\r
        id: $id\r
    ) {\r
        id\r
        name\r
    }\r
}\r
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function G(n,s){if(n.kind==="FragmentSpread")s.add(n.name.value);else if(n.kind==="VariableDefinition"){var l=n.type;l.kind==="NamedType"&&s.add(l.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(o){G(o,s)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(o){G(o,s)}),n.definitions&&n.definitions.forEach(function(o){G(o,s)})}var se={};(function(){Q.definitions.forEach(function(s){if(s.name){var l=new Set;G(s,l),se[s.name.value]=l}})})();function ke(n,s){for(var l=0;l<n.definitions.length;l++){var o=n.definitions[l];if(o.name&&o.name.value==s)return o}}function qe(n,s){var l={kind:n.kind,definitions:[ke(n,s)]};n.hasOwnProperty("loc")&&(l.loc=n.loc);var o=se[s]||new Set,h=new Set,p=new Set;for(o.forEach(function(m){p.add(m)});p.size>0;){var M=p;p=new Set,M.forEach(function(m){if(!h.has(m)){h.add(m);var k=se[m]||new Set;k.forEach(function($){p.add($)})}})}return h.forEach(function(m){var k=ke(n,m);k&&l.definitions.push(k)}),l}qe(Q,"removeModule");var z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getCourseModules"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"course"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modules"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lessons"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"period"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"files"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"getPathUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:468}};z.loc.source={body:`query getCourseModules($slug: String!) {\r
    course(slug: $slug) {\r
        id\r
        slug\r
        name\r
        modules {\r
            id\r
            name\r
            description\r
            lessons {\r
                id\r
                title\r
                description\r
                period\r
                files {\r
                    id\r
                    getPathUrl\r
                    name\r
                }\r
            }\r
        }\r
    }\r
}\r
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function H(n,s){if(n.kind==="FragmentSpread")s.add(n.name.value);else if(n.kind==="VariableDefinition"){var l=n.type;l.kind==="NamedType"&&s.add(l.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(o){H(o,s)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(o){H(o,s)}),n.definitions&&n.definitions.forEach(function(o){H(o,s)})}var ae={};(function(){z.definitions.forEach(function(s){if(s.name){var l=new Set;H(s,l),ae[s.name.value]=l}})})();function _e(n,s){for(var l=0;l<n.definitions.length;l++){var o=n.definitions[l];if(o.name&&o.name.value==s)return o}}function Qe(n,s){var l={kind:n.kind,definitions:[_e(n,s)]};n.hasOwnProperty("loc")&&(l.loc=n.loc);var o=ae[s]||new Set,h=new Set,p=new Set;for(o.forEach(function(m){p.add(m)});p.size>0;){var M=p;p=new Set,M.forEach(function(m){if(!h.has(m)){h.add(m);var k=ae[m]||new Set;k.forEach(function($){p.add($)})}})}return h.forEach(function(m){var k=_e(n,m);k&&l.definitions.push(k)}),l}Qe(z,"getCourseModules");const Ge={class:"content d-flex flex-column flex-column-fluid",id:"kt_content"},ze={class:"container-xxl",id:"kt_content_container"},He={class:"d-flex flex-column flex-row-fluid gap-7 gap-lg-10"},Ye={class:"d-flex flex-column gap-7 gap-lg-10"},Ke={class:"nav nav-custom nav-tabs nav-line-tabs nav-line-tabs-2x border-0 fs-4 fw-bold mb-n2"},We={class:"nav-item"},Ze=S("General"),Je={class:"nav-item"},Xe=S("Modules"),Ie={class:"nav-item"},ei=S("FAQs"),ii={class:"d-flex flex-column gap-7 gap-lg-10"},ni={class:"card card-flush py-4"},ti=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"Modules")])],-1),si={class:"card-body pt-0"},ai={class:"fv-row"},li={class:"accordion",id:"kt_accordion_1"},oi=["id"],di=["data-bs-target","aria-controls"],ri=["id","aria-labelledby"],ci={class:"accordion-body"},ui=["onSubmit"],mi={class:"fv-row mb-10"},vi=e("label",{class:"form-label"},"Name",-1),fi=["onUpdate:modelValue"],pi={class:"fv-row mb-10"},ki=e("label",{class:"form-label"},"Description",-1),_i=["onUpdate:modelValue"],bi={class:"fv-row mb-10 row mb-5"},hi=e("div",{class:"col-md-2 mt-5"},[e("h5",null,"Lessons")],-1),gi={class:"col-md-10"},yi={class:"row mt-5"},Ni={key:0,class:"col-md-12 mb-3"},Si={href:"javascript:;",class:"list-group-item list-group-item-action mb-1 py-3 d-flex justify-content-between align-items-center"},wi=["onClick"],Fi=["onClick"],Mi={class:"col-md-12"},$i=["onClick"],Di=e("i",{class:"la la-plus"},null,-1),Vi=S("Add Lesson "),Li=[Di,Vi],Ri={class:"d-flex justify-content-end"},Ei=["onClick"],xi=e("span",{class:"indicator-label"},"Remove Module",-1),Ci=e("span",{class:"indicator-progress"},[S("Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),Ui=[xi,Ci],Ti=["id"],Oi=e("span",{class:"indicator-label"},"Update Module",-1),ji=e("span",{class:"indicator-progress"},[S("Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),Ai=[Oi,ji],Pi={key:0,class:"row mt-10"},Bi=["onSubmit"],qi=e("div",{class:"fv-row mb-3"},[e("h4",{class:""},"New Module")],-1),Qi={class:"fv-row mb-10"},Gi=e("label",{class:"form-label"},"Name",-1),zi={class:"fv-row mb-10"},Hi=e("label",{class:"form-label"},"Description",-1),Yi={class:"fv-row mb-10 row mb-5"},Ki=e("div",{class:"col-md-2 mt-5"},[e("h5",null,"Lessons")],-1),Wi={class:"col-md-10"},Zi={class:"row mt-5"},Ji={key:0,class:"col-md-12 mb-3"},Xi={href:"javascript:;",class:"list-group-item list-group-item-action mb-1 py-3 d-flex justify-content-between align-items-center"},Ii=["onClick"],en=["onClick"],nn={class:"col-md-12"},tn=e("i",{class:"la la-plus"},null,-1),sn=S("Add Lesson "),an=[tn,sn],ln={class:"d-flex justify-content-end"},on=e("span",{class:"indicator-label"},"Save Module",-1),dn=e("span",{class:"indicator-progress"},[S("Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),rn=[on,dn],cn={key:1,class:"fv-row mt-10 mb-10"},un=e("i",{class:"la la-plus"},null,-1),mn=S("Add Module "),vn=[un,mn],fn={class:"modal fade",id:"newLessonModal",tabindex:"-1","aria-labelledby":"newLessonModalLabel","aria-hidden":"true"},pn={class:"modal-dialog"},kn={class:"modal-content"},_n=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"newLessonModalLabel"},"Add Lesson"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),bn=["onSubmit"],hn={class:"modal-body"},gn={class:"fv-row mb-10 col-md-12"},yn=e("label",{class:"form-label"},"Title",-1),Nn={class:"fv-row mb-10 col-md-12"},Sn=e("label",{class:"form-label"},"Description",-1),wn={class:"fv-row mb-10 col-md-12"},Fn=e("label",{class:"form-label"},"Period",-1),Mn={class:"fv-row mb-10 col-md-12"},$n=e("label",{class:"form-label"},"Add Files",-1),Dn={class:"modal-footer"},Vn=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),Ln=e("span",{class:"indicator-label"},"Save Lesson",-1),Rn=e("span",{class:"indicator-progress"},[S("Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),En=[Ln,Rn],xn={class:"modal fade",id:"updateLessonModal",tabindex:"-1","aria-labelledby":"updateLessonModalLabel","aria-hidden":"true"},Cn={class:"modal-dialog"},Un={class:"modal-content"},Tn=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"updateLessonModalLabel"},"Update Lesson"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),On=["onSubmit"],jn={class:"modal-body"},An={class:"fv-row mb-10 col-md-12"},Pn=e("label",{class:"form-label"},"Title",-1),Bn={class:"fv-row mb-10 col-md-12"},qn=e("label",{class:"form-label"},"Description",-1),Qn={class:"fv-row mb-10 col-md-12"},Gn=e("label",{class:"form-label"},"Period",-1),zn={class:"fv-row mb-10 col-md-12"},Hn=e("label",{class:"form-label"},"Add Files",-1),Yn=["href"],Kn=S(" \xA0 "),Wn=["onClick"],Zn={class:"modal-footer"},Jn=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),Xn=e("span",{class:"indicator-label"},"Save Lesson",-1),In=e("span",{class:"indicator-progress"},[S("Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),et=[Xn,In],rt={setup(n){const s=Oe();s.title="Update Course Modules",s.breadcrumbs=[{link:"/dashboard",title:"Dashboard"},{link:"/courses",title:"Courses"},{link:"",title:"Update Course"}];const{resolveClient:l}=Re();l();const{mutate:o,onDone:h,onError:p}=X(A),{mutate:M,onDone:m,onError:k}=X(B),{mutate:$,onDone:it,onError:nt}=X(Q),x=Ee();let C=U({}),r=N([]),le=N(null),be=N(null),Y=N(null),K=N(null),V=N(!1),L=N(null),R=N([]),E=N([]),oe=N(null);N(null),N([]),U({id:0,modules:{update:[],delete:[],create:[]}});let b=U({name:"",description:"",lessons:{create:[]}}),v=U({moduleIndex:"",lessonRef:"",title:"",description:"",period:"",files:{create:[]}}),a=U({index:0,moduleIndex:"",id:"",title:"",description:"",period:"",files:{create:[],existing_files:[]}});const{result:W,loading:tt}=xe(z,{slug:x.currentRoute.value.params.slug},{fetchPolicy:"network-only"}),he=()=>{Ae(le.value,{name:{validators:{notEmpty:{message:"module name is required"}}}}).validate().then(async function(i){if(i=="Valid"){L.value.setAttribute("data-kt-indicator","on"),L.value.disabled=!0;try{const d=await o(J({course_id:C.id},b),{context:{hasUpload:!0}});alert("module added successfully"),L.value.removeAttribute("data-kt-indicator"),L.value.disabled=!1,r.value.push(d.data.createModule),b.name="",b.description="",b.lessons.create=[],V.value=!1}catch(d){console.log(d),alert("error occurred. please try again later."),L.value.removeAttribute("data-kt-indicator"),L.value.disabled=!1}}else alert("Sorry, looks like there are some errors detected, please try again.")})},ge=()=>{if(v.title!="")if(v.moduleIndex==="")b.lessons.create.push({title:v.title,description:v.description,period:v.period,files:{create:v.files.create}});else{const i=Math.floor(Math.random()*100+1)*Math.floor(Math.random()*100+1)*Math.floor(Math.random()*100+1);r.value[v.moduleIndex].lessons.push({title:v.title,description:v.description,period:v.period,files:v.files.create,lessonRef:i}),r.value[v.moduleIndex].lessons.create===void 0&&(r.value[v.moduleIndex].lessons.create=[]),r.value[v.moduleIndex].lessons.create.push({title:v.title,description:v.description,period:v.period,files:{create:v.files.create},lessonRef:i})}v.moduleIndex="",v.title="",v.description="",v.period="",v.files.create=[];let c=document.querySelector("[name=new_module_add_lesson_files]");c.value="",Y.toggle()},ye=()=>{if(a.title!="")if(a.moduleIndex===""){let i=a.index;b.lessons.create[i].title=a.title,b.lessons.create[i].description=a.description,b.lessons.create[i].period=a.period,b.lessons.create[i].files.create=a.files.existing_files.concat(a.files.create)}else{let i=a.moduleIndex,d=a.index;if(r.value[i].lessons[d].title=a.title,r.value[i].lessons[d].description=a.description,r.value[i].lessons[d].period=a.period,r.value[i].lessons[d].files=a.files.existing_files.concat(a.files.create),r.value[i].lessons.update===void 0&&(r.value[i].lessons.update=[]),a.id==="")for(let t=0;t<r.value[i].lessons.create.length;t++)r.value[i].lessons.create[t].lessonRef==a.lessonRef&&(r.value[i].lessons.create[t].files.create===void 0&&(r.value[i].lessons.create[t].files.create=[]),r.value[i].lessons.create[t].title=a.title,r.value[i].lessons.create[t].description=a.description,r.value[i].lessons.create[t].period=a.period,r.value[i].lessons.create[t].files.create=a.files.existing_files.concat(a.files.create));else{let t="";for(let u=0;u<r.value[i].lessons.update.length;u++)if(r.value[i].lessons.update[u].id==a.id){t=u;break}t===""?r.value[i].lessons.update.push({id:a.id,title:a.title,description:a.description,period:a.period,files:{create:a.files.create,delete:a.files.delete}}):(r.value[i].lessons.update[t].files.create===void 0&&(r.value[i].lessons.update[t].files.create=[]),r.value[i].lessons.update[t].id=a.id,r.value[i].lessons.update[t].title=a.title,r.value[i].lessons.update[t].description=a.description,r.value[i].lessons.update[t].period=a.period,r.value[i].lessons.update[t].files.create=a.files.create,r.value[i].lessons.update[t].files.delete=a.files.delete)}}a.index=0,a.moduleIndex="",a.title="",a.oindex="",a.description="",a.period="",a.files.create=[];let c=document.querySelector("[name=new_module_update_lesson_files]");c.value="",K.toggle()},de=(c,i)=>{i!=null&&(v.moduleIndex=i),Y.show()},re=(c,i,d)=>{let t="";i===""?t=b.lessons.create[c]:t=r.value[i].lessons[c],t!==""&&(a.index=c,a.title=t.title,a.description=t.description,a.period=t.period,i!==""?(d===""||d===void 0?(a.id="",a.lessonRef=t.lessonRef):(a.id=d,a.oindx=""),a.moduleIndex=i,a.files.existing_files=t.files):(a.moduleIndex="",a.id="",a.files.existing_files=t.files.create),K.show())},Ne=c=>{let i=c.target.files;v.files.create=[];for(let d=0;d<i.length;d++)v.files.create.push({name:i[d].name,path:i[d]})},Se=c=>{let i=c.target.files;a.files.create=[];for(let d=0;d<i.length;d++)a.files.create.push({name:i[d].name,path:i[d]})},we=(c,i,d,t)=>{confirm("Confirm to remove this file. You cannot undo this action.")==!0&&(d!==""&&t!==void 0&&(a.files.delete===void 0&&(a.files.delete=[]),a.files.delete.push(t)),a.files.existing_files=a.files.existing_files.filter((u,_)=>_!=c))},Fe=async(c,i)=>{let d=r.value[c];if(R.value[c].setAttribute("data-kt-indicator","on"),R.value[c].disabled=!0,d.lessons.create!==void 0)for(let t=0;t<d.lessons.create.length;t++)delete d.lessons.create[t].lessonRef;try{const t=await M({id:i,course_id:C.id,name:d.name,description:d.description,lessons:{create:d.lessons.create,update:d.lessons.update,delete:d.deleted_lessons}},{context:{hasUpload:!0}});alert("module update successfully"),R.value[c].removeAttribute("data-kt-indicator"),R.value[c].disabled=!1,r.value[c]=t.data.updateModule}catch(t){console.log(t),alert("error occurred. please try again later."),R.value[c].removeAttribute("data-kt-indicator"),R.value[c].disabled=!1}},ce=(c,i,d)=>{confirm("Confirm to remove this lesson. You cannot undo this action.")==!0&&(c!==""?(d!==void 0&&(r.value[c].deleted_lessons===void 0&&(r.value[c].deleted_lessons=[]),r.value[c].deleted_lessons.push(d)),r.value[c].lessons=r.value[c].lessons.filter((t,u)=>u!=i)):b.lessons.create=b.lessons.create.filter((t,u)=>u!=i))},Me=async(c,i,d)=>{if(confirm("Confirm to remove this module. You cannot undo this action.")==!0&&d!==void 0){E.value[i].setAttribute("data-kt-indicator","on"),E.value[i].disabled=!0;try{const t=await $({id:d});alert("module removed successfully"),E.value[i].removeAttribute("data-kt-indicator"),E.value[i].disabled=!1,r.value.splice(i,1)}catch(t){console.log(t),alert("error occurred. please try again later."),E.value[i].removeAttribute("data-kt-indicator"),E.value[i].disabled=!1}}};return Ce(()=>{je.initButtons(),Y=new bootstrap.Modal(document.querySelector("#newLessonModal")),K=new bootstrap.Modal(document.querySelector("#updateLessonModal"))}),Ue(()=>{W.value&&(W.value.course?(C=W.value.course,C.modules.length&&C.modules.forEach(function(c){r.value.push({name:c.name,description:c.description,id:c.id,lessons:c.lessons.map(i=>J({},i))})})):x.push("/courses"))}),(c,i)=>{const d=Te("router-link");return g(),y("div",Ge,[e("div",ze,[e("div",He,[e("div",Ye,[e("ul",Ke,[e("li",We,[I(d,{class:"nav-link text-active-primary pb-4",to:`/courses/edit/${f(x).currentRoute.value.params.slug}`},{default:ee(()=>[Ze]),_:1},8,["to"])]),e("li",Je,[I(d,{class:"nav-link text-active-primary pb-4 active",to:`/courses/edit/${f(x).currentRoute.value.params.slug}/modules`},{default:ee(()=>[Xe]),_:1},8,["to"])]),e("li",Ie,[I(d,{class:"nav-link text-active-primary pb-4",to:`/courses/edit/${f(x).currentRoute.value.params.slug}/faqs`},{default:ee(()=>[ei]),_:1},8,["to"])])]),e("div",ii,[e("div",ni,[ti,e("div",si,[e("div",ai,[e("div",li,[(g(!0),y(T,null,O(f(r),(t,u)=>(g(),y("div",{class:"accordion-item",key:u},[e("h2",{class:"accordion-header",id:`kt_accordion_${u}_header_${u}`},[e("button",{class:"accordion-button fs-4 fw-bold collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":`#kt_accordion_${u}_body_${u}`,"aria-expanded":"true","aria-controls":`kt_accordion_${u}_body_${u}`},j(t.name),9,di)],8,oi),e("div",{id:`kt_accordion_${u}_body_${u}`,class:"accordion-collapse collapse","aria-labelledby":`kt_accordion_${u}_header_${u}`,"data-bs-parent":"#kt_accordion_1"},[e("div",ci,[e("form",{onSubmit:D(_=>Fe(u,t.id),["prevent"]),ref_for:!0,ref:"editModuleForm",class:"form fv-plugins-bootstrap5 fv-plugins-framework"},[e("div",mi,[vi,w(e("input",{"onUpdate:modelValue":_=>t.name=_,type:"text",name:"name",class:"form-control mb-2",placeholder:"Name"},null,8,fi),[[F,t.name]])]),e("div",pi,[ki,w(e("textarea",{"onUpdate:modelValue":_=>t.description=_,name:"description",class:"form-control mb-2",placeholder:"Description"},null,8,_i),[[F,t.description]])]),e("div",bi,[hi,e("div",gi,[e("div",yi,[t.lessons.length?(g(),y("div",Ni,[(g(!0),y(T,null,O(t.lessons,(_,Z)=>(g(),y("ul",{key:Z,class:"list-group"},[e("li",Si,[e("a",{href:"javascript:;",onClick:$e=>re(Z,u,_.id),class:"m-0 p-0"},j(_.title),9,wi),e("button",{onClick:D($e=>ce(u,Z,_.id),["prevent"]),class:"btn btn-danger btn-sm py-1 px-2"},"Remove",8,Fi)])]))),128))])):ie("",!0),e("div",Mi,[e("a",{onClick:_=>de(c.$e,u),href:"javascript:;",class:"btn btn-light-success"},Li,8,$i)])])])]),e("div",Ri,[e("button",{ref_for:!0,ref:_=>{f(E)[u]=_},type:"button",onClick:D(_=>Me(c.$e,u,t.id),["prevent"]),class:"btn btn-danger me-5"},Ui,8,Ei),e("button",{ref_for:!0,ref:_=>{f(R)[u]=_},type:"submit",id:`moduleUpdateButton-${u}`,class:"btn btn-primary"},Ai,8,Ti)])],40,ui)])],8,ri)]))),128))])]),f(V)?(g(),y("div",Pi,[e("form",{onSubmit:D(he,["prevent"]),ref_key:"newModuleForm",ref:le,class:"form fv-plugins-bootstrap5 fv-plugins-framework"},[qi,e("div",Qi,[Gi,w(e("input",{"onUpdate:modelValue":i[0]||(i[0]=t=>f(b).name=t),type:"text",name:"name",class:"form-control mb-2",placeholder:"Name"},null,512),[[F,f(b).name]])]),e("div",zi,[Hi,w(e("textarea",{"onUpdate:modelValue":i[1]||(i[1]=t=>f(b).description=t),name:"description",class:"form-control mb-2",placeholder:"Description"},null,512),[[F,f(b).description]])]),e("div",Yi,[Ki,e("div",Wi,[e("div",Zi,[f(b).lessons.create.length?(g(),y("div",Ji,[(g(!0),y(T,null,O(f(b).lessons.create,(t,u)=>(g(),y("ul",{key:u,class:"list-group"},[e("li",Xi,[e("a",{href:"javascript:;",onClick:_=>re(u,"",""),class:"m-0 p-0"},j(t.title),9,Ii),e("button",{onClick:D(_=>ce("",u,t.id),["prevent"]),class:"btn btn-danger btn-sm py-1 px-2"},"Remove",8,en)])]))),128))])):ie("",!0),e("div",nn,[e("a",{onClick:i[2]||(i[2]=t=>de()),href:"javascript:;",class:"btn btn-light-success"},an)])])])]),e("div",ln,[e("button",{onClick:i[3]||(i[3]=D(t=>ve(V)?V.value=!1:V=!1,["prevent"])),class:"btn btn-light me-5"},"Cancel"),e("button",{ref_key:"newModuleSubmitButton",ref:L,type:"submit",id:"newModuleSubmitButton",class:"btn btn-primary"},rn,512)])],40,Bi)])):(g(),y("div",cn,[e("a",{role:"button",onClick:i[4]||(i[4]=t=>ve(V)?V.value=!0:V=!0),class:"btn btn-light-primary"},vn)]))]),e("div",fn,[e("div",pn,[e("div",kn,[_n,e("form",{onSubmit:D(ge,["prevent"]),ref_key:"newLessonForm",ref:be,class:"form fv-plugins-bootstrap5 fv-plugins-framework"},[e("div",hn,[e("div",gn,[yn,w(e("input",{type:"text","onUpdate:modelValue":i[5]||(i[5]=t=>f(v).title=t),class:"form-control mb-2",placeholder:"Lesson Title"},null,512),[[F,f(v).title]])]),e("div",Nn,[Sn,w(e("textarea",{class:"form-control mb-2","onUpdate:modelValue":i[6]||(i[6]=t=>f(v).description=t),placeholder:"Lesson Description"},null,512),[[F,f(v).description]])]),e("div",wn,[Fn,w(e("input",{type:"text",class:"form-control mb-2","onUpdate:modelValue":i[7]||(i[7]=t=>f(v).period=t),placeholder:"No. of minutes"},null,512),[[F,f(v).period]])]),e("div",Mn,[$n,e("input",{onChange:i[8]||(i[8]=t=>Ne(t)),type:"file",name:"new_module_add_lesson_files",multiple:"",class:"form-control mb-2"},null,32)])]),e("div",Dn,[Vn,e("button",{ref_key:"newLessonSubmitButton",ref:oe,type:"submit",id:"newLessonSubmitButton",class:"btn btn-primary"},En,512)])],40,bn)])])]),e("div",xn,[e("div",Cn,[e("div",Un,[Tn,e("form",{onSubmit:D(ye,["prevent"]),ref:"editNewModuleLessonForm",class:"form fv-plugins-bootstrap5 fv-plugins-framework"},[e("div",jn,[e("div",An,[Pn,w(e("input",{type:"text","onUpdate:modelValue":i[9]||(i[9]=t=>f(a).title=t),class:"form-control mb-2",placeholder:"Lesson Title"},null,512),[[F,f(a).title]])]),e("div",Bn,[qn,w(e("textarea",{class:"form-control mb-2","onUpdate:modelValue":i[10]||(i[10]=t=>f(a).description=t),placeholder:"Lesson Description"},null,512),[[F,f(a).description]])]),e("div",Qn,[Gn,w(e("input",{type:"text",class:"form-control mb-2","onUpdate:modelValue":i[11]||(i[11]=t=>f(a).period=t),placeholder:"No. of minutes"},null,512),[[F,f(a).period]])]),e("div",zn,[Hn,e("input",{onChange:i[12]||(i[12]=t=>Se(t)),type:"file",name:"new_module_update_lesson_files",multiple:"",class:"form-control mb-2"},null,32),f(a).files.existing_files?(g(!0),y(T,{key:0},O(f(a).files.existing_files,(t,u)=>(g(),y("ul",null,[e("li",null,[e("a",{target:"_blank",href:t.getPathUrl},j(t.name),9,Yn),Kn,e("button",{onClick:D(_=>we(u,f(a).index,f(a).moduleIndex,t.id),["prevent"]),class:"btn btn-danger btn-sm py-1 px-2"},"remove",8,Wn)])]))),256)):ie("",!0)])]),e("div",Zn,[Jn,e("button",{ref_key:"newLessonSubmitButton",ref:oe,type:"submit",id:"newLessonSubmitButton",class:"btn btn-primary"},et,512)])],40,On)])])])])])])])])])}}};export{rt as default};
