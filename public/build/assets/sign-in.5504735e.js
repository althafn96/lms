import{y as u,N as D,k as A,u as T,g as B,i as g,l as h,q as c,m as n,t as R,Z as C,P as w,Q as _,O as L,x as y,s as S}from"./vendor.9ac200cc.js";import{r as M,t as I,l as O}from"./Bootstrap5.88c59918.js";import{b as P}from"./app.52277fe1.js";var j="/build/media/svg/brand-logos/google-icon.svg",f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Login"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"password"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}},{kind:"Argument",name:{kind:"Name",value:"password"},value:{kind:"Variable",name:{kind:"Name",value:"password"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"loggable"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Admin"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"full_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_picture"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Instructor"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"full_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_picture"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:409}};f.loc.source={body:`mutation Login($email: String!, $password: String!) {\r
    login(email: $email, password: $password) {\r
        id,\r
        email,\r
        loggable {\r
            __typename\r
            ... on Admin {\r
                full_name\r
                display_picture\r
            }\r
            ... on Instructor {\r
                full_name\r
                display_picture\r
            }\r
        }\r
    }\r
}\r
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function v(e,a){if(e.kind==="FragmentSpread")a.add(e.name.value);else if(e.kind==="VariableDefinition"){var t=e.type;t.kind==="NamedType"&&a.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(i){v(i,a)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(i){v(i,a)}),e.definitions&&e.definitions.forEach(function(i){v(i,a)})}var k={};(function(){f.definitions.forEach(function(a){if(a.name){var t=new Set;v(a,t),k[a.name.value]=t}})})();function x(e,a){for(var t=0;t<e.definitions.length;t++){var i=e.definitions[t];if(i.name&&i.name.value==a)return i}}function q(e,a){var t={kind:e.kind,definitions:[x(e,a)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=k[a]||new Set,r=new Set,s=new Set;for(i.forEach(function(o){s.add(o)});s.size>0;){var p=s;s=new Set,p.forEach(function(o){if(!r.has(o)){r.add(o);var l=k[o]||new Set;l.forEach(function(b){s.add(b)})}})}return r.forEach(function(o){var l=x(e,o);l&&t.definitions.push(l)}),t}q(f,"Login");var N={};const $=["onSubmit"],Q=n("div",{class:"text-center mb-10"},[n("h1",{class:"text-dark mb-3"},"Sign In to LMS"),n("div",{class:"text-gray-400 fw-bold fs-4"},[y("New Here? "),n("a",{href:"/auth/sign-up",class:"link-primary fw-bolder"},"Create an Account")])],-1),G={key:0,class:"fv-row mb-10"},U={class:"alert alert-dismissible bg-danger d-flex flex-column flex-sm-row p-5 mb-10"},z={class:"d-flex flex-column text-light pe-0 pe-sm-10"},H=n("h4",{class:"mb-2 light"},"Error",-1),Z=S('<button type="button" class="position-absolute position-sm-relative m-2 m-sm-0 top-0 end-0 btn btn-icon ms-sm-auto" data-bs-dismiss="alert"><span class="svg-icon svg-icon-2x svg-icon-light"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="black"></rect><rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="black"></rect></svg></span></button>',1),J={class:"fv-row mb-10"},K=n("label",{class:"form-label fs-6 fw-bolder text-dark"},"Email",-1),W={class:"fv-row mb-10"},X=n("label",{class:"form-label fw-bolder text-dark fs-6 mb-0"},"Password",-1),Y={class:"text-center"},ee=n("span",{class:"indicator-label"},"Continue",-1),ie=n("span",{class:"indicator-progress"},[y("Please wait... "),n("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),te=[ee,ie],ne=S('<div class="d-flex flex-stack mb-2"><a href="/auth/forgot-password" class="link-primary fs-6 fw-bolder">Forgot Password ?</a></div><div class="text-center text-muted text-uppercase fw-bolder mb-5">or</div><a href="javascript:" class="btn btn-flex flex-center btn-light btn-lg w-100 mb-5"><img alt="Logo" src="'+j+'" class="h-20px me-3">Continue with Google</a>',3),ae={setup(e){let a=u(null),t=D({email:"",password:""}),i=u(null),r=u(null),s=u("");const{mutate:p,onDone:o,onError:l}=A(f),b=P(),E=T(),F=V=>{r.validate().then(async function(d){if(d=="Valid"){i.value.setAttribute("data-kt-indicator","on"),i.value.disabled=!0,s.value="";const m=await b.login(p,t,o,l,i.value);m.type=="success"?E.push("/dashboard"):(i.value.removeAttribute("data-kt-indicator"),i.value.disabled=!1,s.value=m.error)}else i.value.removeAttribute("data-kt-indicator"),i.value.disabled=!1})};return B(()=>{r=M(a.value,{fields:{email:{validators:{notEmpty:{message:"email address is required"},emailAddress:{message:"The value is not a valid email address"}}},password:{validators:{notEmpty:{message:"password is required"}}}},plugins:{trigger:new I,bootstrap:new O({rowSelector:".fv-row"})}})}),(V,d)=>(g(),h("form",{ref_key:"form",ref:a,onSubmit:L(F,["prevent"]),class:"form w-100",id:"kt_sign_in_form"},[Q,c(s)!=""?(g(),h("div",G,[n("div",U,[n("div",z,[H,n("span",null,R(c(s)),1)]),Z])])):C("",!0),n("div",J,[K,w(n("input",{"onUpdate:modelValue":d[0]||(d[0]=m=>c(t).email=m),class:"form-control form-control-lg form-control-solid",type:"text",name:"email",autocomplete:"off"},null,512),[[_,c(t).email]])]),n("div",W,[X,w(n("input",{"onUpdate:modelValue":d[1]||(d[1]=m=>c(t).password=m),class:"form-control form-control-lg form-control-solid",type:"password",name:"password",autocomplete:"off"},null,512),[[_,c(t).password]])]),n("div",Y,[n("button",{ref_key:"submitButton",ref:i,type:"submit",id:"kt_sign_in_submit",class:"btn btn-lg btn-primary w-100 mb-5"},te,512),ne])],40,$))}};typeof N=="function"&&N(ae);export{ae as default};
