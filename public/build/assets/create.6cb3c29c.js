import{u as A,y as p,N as L,a0 as K,k as Q,g as z,r as G,i as Y,l as H,m as e,O,n as f,q as n,P as g,Q as J,R as N,x as h}from"./vendor.9ac200cc.js";import{d as W}from"./getCategoriesToSelect.55e6b6b8.js";import{d as X,a as Z}from"./getInstructorsToSelect.a6948607.js";import{d as ee}from"./getLocationsToSelect.34aa23e1.js";import"./getCourses.974d6fbf.js";import{u as te,K as ae,a as ie}from"./app.52277fe1.js";import"./sweetalert2.1b53689f.js";import{C as ne}from"./ckeditor.80e0daed.js";import{s as x}from"./vue-multiselect.esm.f7127d48.js";import{v as se}from"./useValidator.4107c1a7.js";import"./Bootstrap5.88c59918.js";var V={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"addCourse"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"short_description"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"long_description"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"prerequisites"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"thumbnail"}},type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cover_img"}},type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"is_featured"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"categories"}},type:{kind:"NamedType",name:{kind:"Name",value:"CategoryBelongsToMany"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"skills"}},type:{kind:"NamedType",name:{kind:"Name",value:"SkillBelongsToMany"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"instructors"}},type:{kind:"NamedType",name:{kind:"Name",value:"InstructorBelongsToMany"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locations"}},type:{kind:"NamedType",name:{kind:"Name",value:"LocationBelongsToMany"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createCourse"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"ObjectField",name:{kind:"Name",value:"short_description"},value:{kind:"Variable",name:{kind:"Name",value:"short_description"}}},{kind:"ObjectField",name:{kind:"Name",value:"long_description"},value:{kind:"Variable",name:{kind:"Name",value:"long_description"}}},{kind:"ObjectField",name:{kind:"Name",value:"prerequisites"},value:{kind:"Variable",name:{kind:"Name",value:"prerequisites"}}},{kind:"ObjectField",name:{kind:"Name",value:"thumbnail"},value:{kind:"Variable",name:{kind:"Name",value:"thumbnail"}}},{kind:"ObjectField",name:{kind:"Name",value:"cover_img"},value:{kind:"Variable",name:{kind:"Name",value:"cover_img"}}},{kind:"ObjectField",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}},{kind:"ObjectField",name:{kind:"Name",value:"is_featured"},value:{kind:"Variable",name:{kind:"Name",value:"is_featured"}}},{kind:"ObjectField",name:{kind:"Name",value:"categories"},value:{kind:"Variable",name:{kind:"Name",value:"categories"}}},{kind:"ObjectField",name:{kind:"Name",value:"skills"},value:{kind:"Variable",name:{kind:"Name",value:"skills"}}},{kind:"ObjectField",name:{kind:"Name",value:"instructors"},value:{kind:"Variable",name:{kind:"Name",value:"instructors"}}},{kind:"ObjectField",name:{kind:"Name",value:"locations"},value:{kind:"Variable",name:{kind:"Name",value:"locations"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:959}};V.loc.source={body:`mutation addCourse (\r
    $name: String!,\r
    $short_description: String,\r
    $long_description: String,\r
    $prerequisites: String,\r
    $thumbnail: Upload,\r
    $cover_img: Upload,\r
    $status: Int!,\r
    $is_featured: Int,\r
    $categories: CategoryBelongsToMany,\r
    $skills: SkillBelongsToMany,\r
    $instructors: InstructorBelongsToMany,\r
    $locations: LocationBelongsToMany\r
) {\r
    createCourse (\r
        input: {\r
            name: $name,\r
            short_description: $short_description,\r
            long_description: $long_description,\r
            prerequisites: $prerequisites,\r
            thumbnail: $thumbnail,\r
            cover_img: $cover_img,\r
            status: $status,\r
            is_featured: $is_featured,\r
            categories: $categories,\r
            skills: $skills,\r
            instructors: $instructors,\r
            locations: $locations\r
        }\r
    ) {\r
        id\r
        name\r
        slug\r
    }\r
}\r
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function w(l,o){if(l.kind==="FragmentSpread")o.add(l.name.value);else if(l.kind==="VariableDefinition"){var d=l.type;d.kind==="NamedType"&&o.add(d.name.value)}l.selectionSet&&l.selectionSet.selections.forEach(function(r){w(r,o)}),l.variableDefinitions&&l.variableDefinitions.forEach(function(r){w(r,o)}),l.definitions&&l.definitions.forEach(function(r){w(r,o)})}var T={};(function(){V.definitions.forEach(function(o){if(o.name){var d=new Set;w(o,d),T[o.name.value]=d}})})();function q(l,o){for(var d=0;d<l.definitions.length;d++){var r=l.definitions[d];if(r.name&&r.name.value==o)return r}}function le(l,o){var d={kind:l.kind,definitions:[q(l,o)]};l.hasOwnProperty("loc")&&(d.loc=l.loc);var r=T[o]||new Set,c=new Set,v=new Set;for(r.forEach(function(u){v.add(u)});v.size>0;){var t=v;v=new Set,t.forEach(function(u){if(!c.has(u)){c.add(u);var b=T[u]||new Set;b.forEach(function(k){v.add(k)})}})}return c.forEach(function(u){var b=q(l,u);b&&d.definitions.push(b)}),d}le(V,"addCourse");const oe={class:"content d-flex flex-column flex-column-fluid",id:"kt_content"},de={class:"container-xxl",id:"kt_content_container"},re=["onSubmit"],ce={class:"d-flex flex-column gap-7 gap-lg-10 w-100 w-lg-300px mb-7 me-lg-10"},ue={class:"card card-flush py-4"},me=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"Thumbnail")])],-1),pe={class:"card-body text-center pt-0"},ve={class:"image-input image-input-empty image-input-outline mb-3","data-kt-image-input":"true",style:{"background-image":"url(/media/svg/files/blank-image.svg)"}},be=e("div",{class:"image-input-wrapper w-150px h-150px"},null,-1),fe={class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"change","data-bs-toggle":"tooltip",title:"Change Icon"},ke=e("i",{class:"bi bi-pencil-fill fs-7"},null,-1),ge=e("span",{class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"cancel","data-bs-toggle":"tooltip",title:"Cancel Icon"},[e("i",{class:"bi bi-x fs-2"})],-1),he=e("span",{class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"remove","data-bs-toggle":"tooltip",title:"Remove Icon"},[e("i",{class:"bi bi-x fs-2"})],-1),_e=e("div",{class:"text-muted fs-7"},"Set the course thumbnail. Only *.png, *.jpg and *.jpeg image files are accepted",-1),ye={class:"card card-flush py-4"},Ne=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"Cover Image")])],-1),xe={class:"card-body text-center pt-0"},Ve={class:"image-input image-input-empty image-input-outline mb-3","data-kt-image-input":"true",style:{"background-image":"url(/media/svg/files/blank-image.svg)"}},we=e("div",{class:"image-input-wrapper w-150px h-150px"},null,-1),Se={class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"change","data-bs-toggle":"tooltip",title:"Change Image"},Ce=e("i",{class:"bi bi-pencil-fill fs-7"},null,-1),Te=e("span",{class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"cancel","data-bs-toggle":"tooltip",title:"Cancel Image"},[e("i",{class:"bi bi-x fs-2"})],-1),je=e("span",{class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"remove","data-bs-toggle":"tooltip",title:"Remove Image"},[e("i",{class:"bi bi-x fs-2"})],-1),$e=e("div",{class:"text-muted fs-7"},"Set the cover image. Only *.png, *.jpg and *.jpeg image files are accepted",-1),De={class:"card card-flush py-4"},Oe=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"Categories")])],-1),qe={class:"card-body text-center pt-0"},Fe={class:"mb-10 fv-row"},Ie={class:"card card-flush py-4"},Ee=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"Instructors")])],-1),Be={class:"card-body text-center pt-0"},Ue={class:"mb-10 fv-row"},Me={class:"card card-flush py-4"},Re=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"Institutions")])],-1),Pe={class:"card-body text-center pt-0"},Ae={class:"mb-10 fv-row"},Le={class:"card card-flush py-4"},Ke=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"Skills")])],-1),Qe={class:"card-body text-center pt-0"},ze={class:"mb-10 fv-row"},Ge={class:"d-flex flex-column flex-row-fluid gap-7 gap-lg-10"},Ye={class:"d-flex flex-column gap-7 gap-lg-10"},He={class:"card card-flush py-4"},Je={class:"card-body pt-0"},We={class:"mb-10 fv-row"},Xe=e("label",{class:"required form-label"},"Name",-1),Ze={class:"mb-10 fv-row"},et=e("label",{class:"form-label"},"Short Description",-1),tt={class:"mb-10 fv-row"},at=e("label",{class:"form-label"},"Long Description",-1),it={class:"mb-10 fv-row"},nt=e("label",{class:"form-label"},"Prerequisites",-1),st={class:"mb-10 fv-row d-flex flex-column"},lt=e("label",{class:"form-label"},"Featured",-1),ot={class:"btn-group w-50","data-kt-buttons":"true","data-kt-buttons-target":"[data-kt-button]"},dt={class:"btn btn-outline-secondary text-muted text-hover-white text-active-white btn-outline btn-active-success","data-kt-button":"true"},rt=h(" Yes "),ct={class:"btn btn-outline-secondary text-muted text-hover-white text-active-white btn-outline btn-active-danger active","data-kt-button":"true"},ut=h(" No "),mt={class:"mb-10 fv-row d-flex flex-column"},pt=e("label",{class:"form-label"},"Status",-1),vt={class:"btn-group w-50","data-kt-buttons":"true","data-kt-buttons-target":"[data-kt-button]"},bt={class:"btn btn-outline-secondary text-muted text-hover-white text-active-white btn-outline btn-active-success active","data-kt-button":"true"},ft=h(" Enabled "),kt={class:"btn btn-outline-secondary text-muted text-hover-white text-active-white btn-outline btn-active-danger","data-kt-button":"true"},gt=h(" Disabled "),ht={class:"d-flex justify-content-end"},_t=e("span",{class:"indicator-label"},"Save Changes",-1),yt=e("span",{class:"indicator-progress"},[h("Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),Nt=[_t,yt],Et={setup(l){const o=te();o.title="Add Course",o.breadcrumbs=[{link:"/dashboard",title:"Dashboard"},{link:"/courses",title:"Courses"},{link:"",title:"Add Course"}];const d=A();let r=p(null),c=p(null),v=p(null),t=L({name:"",short_description:"",long_description:"",prerequisites:"",thumbnail:null,cover_img:null,status:1,is_featured:0,selected_categories:[],selected_skills:[],selected_instructors:[],selected_locations:[],categories:{sync:[]},instructors:{sync:[]},locations:{sync:[]},skills:{sync:[],create:[]}}),u=ne,b={},k=p(null),S=p(null);p([]);let j=p([]),C=p([]),$=p([]),D=p([]);const{resolveClient:F}=K(),_=F(),{mutate:I,onDone:xt,onError:Vt}=Q(V),E=()=>{t.categories.sync=[],t.instructors.sync=[],t.locations.sync=[],t.skills.sync=[],t.skills.create=[],t.selected_categories.length&&t.selected_categories.forEach(function(s,i){t.categories.sync.push(s.id)}),t.selected_instructors.length&&t.selected_instructors.forEach(function(s,i){t.instructors.sync.push(s.id)}),t.selected_locations.length&&t.selected_locations.forEach(function(s,i){t.locations.sync.push(s.id)}),t.selected_skills.length&&t.selected_skills.forEach(function(s,i){isNaN(s.id)?t.skills.create.push({title:s.title}):t.skills.sync.push(s.id)}),v.validate().then(async function(s){if(s=="Valid"){c.value.setAttribute("data-kt-indicator","on"),c.value.disabled=!0;try{const i=await I(t,{context:{hasUpload:!0}});alert("course added successfully"),d.push(`/courses/edit/${i.data.createCourse.slug}`),c.value.removeAttribute("data-kt-indicator"),c.value.disabled=!1}catch(i){alert("error occurred. please try again later."),console.log(i),c.value.removeAttribute("data-kt-indicator"),c.value.disabled=!1}}else alert("Sorry, looks like there are some errors detected, please try again.")})},y=(s,i,m)=>{if(i=="thumbnail")if(m=="set"){let a=new Blob(k.value.files,{type:"image/*"});a.name=k.value.files[0].name,t.thumbnail=a}else t.thumbnail=null;if(i=="cover_img")if(m=="set"){let a=new Blob(S.value.files,{type:"image/*"});a.name=S.value.files[0].name,t.cover_img=a}else t.cover_img=null},B=async()=>{const{data:s,loading:i,fetch:m}=await _.query({query:W},{fetchPolicy:"network-only"});j.value=s.categories.data.map(function(a){return{id:a.id,name:a.name}})},U=async()=>{const{data:s,loading:i,fetch:m}=await _.query({query:X},{fetchPolicy:"network-only"});$.value=s.instructors.data.map(function(a){return{id:a.id,name:a.full_name}})},M=async()=>{const{data:s,loading:i,fetch:m}=await _.query({query:ee},{fetchPolicy:"network-only"});D.value=s.locations.data.map(function(a){return{id:a.id,name:a.name}})},R=async()=>{const{data:s,loading:i,fetch:m}=await _.query({query:Z},{fetchPolicy:"network-only"});C.value=s.skills.data.map(function(a){return{id:a.id,title:a.title}})},P=s=>{C.value.push({title:s,id:s}),t.selected_skills.push({title:s,id:s})};return z(()=>{v=se(r.value,{name:{validators:{notEmpty:{message:"Course Name is required"}}}}),ae.init(),ie.initButtons()}),(s,i)=>{const m=G("ckeditor");return Y(),H("div",oe,[e("div",de,[e("form",{onSubmit:O(E,["prevent"]),ref_key:"form",ref:r,class:"form fv-plugins-bootstrap5 fv-plugins-framework d-flex flex-column flex-lg-row"},[e("div",ce,[e("div",ue,[me,e("div",pe,[e("div",ve,[be,e("label",fe,[ke,e("input",{ref_key:"thumbnail",ref:k,onChange:i[0]||(i[0]=a=>y(a,"thumbnail","set")),type:"file",name:"thumbnail",accept:".png, .jpg, .jpeg"},null,544),e("input",{type:"hidden",onClick:i[1]||(i[1]=a=>y(a,"thumbnail","remove")),name:"thumbnail_remove"})]),ge,he]),_e])]),e("div",ye,[Ne,e("div",xe,[e("div",Ve,[we,e("label",Se,[Ce,e("input",{ref_key:"cover_img",ref:S,onChange:i[2]||(i[2]=a=>y(a,"cover_img","set")),type:"file",name:"cover_img",accept:".png, .jpg, .jpeg"},null,544),e("input",{type:"hidden",onClick:i[3]||(i[3]=a=>y(a,"cover_img","remove")),name:"cover_img_remove"})]),Te,je]),$e])]),e("div",De,[Oe,e("div",qe,[e("div",Fe,[f(n(x),{modelValue:n(t).selected_categories,"onUpdate:modelValue":i[4]||(i[4]=a=>n(t).selected_categories=a),onSearchChange:B,"track-by":"id",label:"name","show-labels":!1,multiple:!0,"close-on-select":!1,noOptionsText:"Enter Category Name",options:n(j)},null,8,["modelValue","options"])])])]),e("div",Ie,[Ee,e("div",Be,[e("div",Ue,[f(n(x),{modelValue:n(t).selected_instructors,"onUpdate:modelValue":i[5]||(i[5]=a=>n(t).selected_instructors=a),onSearchChange:U,"track-by":"id",label:"name","show-labels":!1,multiple:!0,"close-on-select":!1,noOptionsText:"Enter Instructor",placeholder:"Search an Instructor",options:n($)},null,8,["modelValue","options"])])])]),e("div",Me,[Re,e("div",Pe,[e("div",Ae,[f(n(x),{modelValue:n(t).selected_locations,"onUpdate:modelValue":i[6]||(i[6]=a=>n(t).selected_locations=a),onSearchChange:M,"track-by":"id",label:"name","show-labels":!1,multiple:!0,"close-on-select":!1,noOptionsText:"Enter Location",placeholder:"Search a Location",options:n(D)},null,8,["modelValue","options"])])])]),e("div",Le,[Ke,e("div",Qe,[e("div",ze,[f(n(x),{modelValue:n(t).selected_skills,"onUpdate:modelValue":i[7]||(i[7]=a=>n(t).selected_skills=a),onSearchChange:R,"track-by":"id",label:"title","show-labels":!1,multiple:!0,"close-on-select":!1,noOptionsText:"Enter Skill",placeholder:"Search or add a skill",taggable:!0,onTag:P,options:n(C)},null,8,["modelValue","options"])])])])]),e("div",Ge,[e("div",Ye,[e("div",He,[e("div",Je,[e("div",We,[Xe,g(e("input",{"onUpdate:modelValue":i[8]||(i[8]=a=>n(t).name=a),type:"text",name:"name",class:"form-control mb-2",placeholder:"Name"},null,512),[[J,n(t).name]])]),e("div",Ze,[et,f(m,{editor:n(u),modelValue:n(t).short_description,"onUpdate:modelValue":i[9]||(i[9]=a=>n(t).short_description=a),config:n(b)},null,8,["editor","modelValue","config"])]),e("div",tt,[at,f(m,{editor:n(u),modelValue:n(t).long_description,"onUpdate:modelValue":i[10]||(i[10]=a=>n(t).long_description=a),config:n(b)},null,8,["editor","modelValue","config"])]),e("div",it,[nt,f(m,{editor:n(u),modelValue:n(t).prerequisites,"onUpdate:modelValue":i[11]||(i[11]=a=>n(t).prerequisites=a),config:n(b)},null,8,["editor","modelValue","config"])]),e("div",st,[lt,e("div",ot,[e("label",dt,[g(e("input",{"onUpdate:modelValue":i[12]||(i[12]=a=>n(t).is_featured=a),class:"btn-check",type:"radio",name:"is_featured",value:1},null,512),[[N,n(t).is_featured]]),rt]),e("label",ct,[g(e("input",{"onUpdate:modelValue":i[13]||(i[13]=a=>n(t).is_featured=a),class:"btn-check",type:"radio",name:"is_featured",checked:"checked",value:0},null,512),[[N,n(t).is_featured]]),ut])])]),e("div",mt,[pt,e("div",vt,[e("label",bt,[g(e("input",{"onUpdate:modelValue":i[14]||(i[14]=a=>n(t).status=a),class:"btn-check",type:"radio",name:"status",checked:"checked",value:1},null,512),[[N,n(t).status]]),ft]),e("label",kt,[g(e("input",{"onUpdate:modelValue":i[15]||(i[15]=a=>n(t).status=a),class:"btn-check",type:"radio",name:"status",value:0},null,512),[[N,n(t).status]]),gt])])])])])]),e("div",ht,[e("button",{onClick:i[16]||(i[16]=O(a=>n(d).go(-1),["prevent"])),id:"course_create_cancel",class:"btn btn-light me-5"},"Cancel"),e("button",{ref_key:"submitButton",ref:c,type:"submit",id:"submitButton",class:"btn btn-primary"},Nt,512)])])],40,re)])])}}};export{Et as default};
