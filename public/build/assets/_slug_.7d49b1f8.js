import{u as O,U as T,y as b,N as A,k as $,a7 as B,g as C,i as R,l as q,m as e,O as D,Y as x,q as n,a8 as I,P as v,Q as _,R as j,s as M,x as w}from"./vendor.9ac200cc.js";import{u as P,b as Q,K as z,a as G}from"./app.52277fe1.js";import{v as K}from"./useValidator.4107c1a7.js";import{S as L}from"./sweetalert2.1b53689f.js";import"./ckeditor.80e0daed.js";import{d as Y}from"./getAdmin.86143afa.js";import"./Bootstrap5.88c59918.js";var k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateAdmin"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first_name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last_name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"display_picture"}},type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user"}},type:{kind:"NamedType",name:{kind:"Name",value:"AdminUserMorphOne"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateAdmin"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"first_name"},value:{kind:"Variable",name:{kind:"Name",value:"first_name"}}},{kind:"ObjectField",name:{kind:"Name",value:"last_name"},value:{kind:"Variable",name:{kind:"Name",value:"last_name"}}},{kind:"ObjectField",name:{kind:"Name",value:"display_picture"},value:{kind:"Variable",name:{kind:"Name",value:"display_picture"}}},{kind:"ObjectField",name:{kind:"Name",value:"user"},value:{kind:"Variable",name:{kind:"Name",value:"user"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"full_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_picture"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:494}};k.loc.source={body:`mutation updateAdmin (\r
    $id: ID!,\r
    $first_name: String!,\r
    $last_name: String!,\r
    $display_picture: Upload,\r
    $user: AdminUserMorphOne\r
) {\r
    updateAdmin (\r
        id: $id,\r
        input: {\r
            first_name: $first_name,\r
            last_name: $last_name,\r
            display_picture: $display_picture,\r
            user: $user\r
        }\r
    ) {\r
        full_name\r
        slug\r
        display_picture\r
        user {\r
            email\r
        }\r
    }\r
}\r
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function g(i,l){if(i.kind==="FragmentSpread")l.add(i.name.value);else if(i.kind==="VariableDefinition"){var d=i.type;d.kind==="NamedType"&&l.add(d.name.value)}i.selectionSet&&i.selectionSet.selections.forEach(function(r){g(r,l)}),i.variableDefinitions&&i.variableDefinitions.forEach(function(r){g(r,l)}),i.definitions&&i.definitions.forEach(function(r){g(r,l)})}var N={};(function(){k.definitions.forEach(function(l){if(l.name){var d=new Set;g(l,d),N[l.name.value]=d}})})();function E(i,l){for(var d=0;d<i.definitions.length;d++){var r=i.definitions[d];if(r.name&&r.name.value==l)return r}}function H(i,l){var d={kind:i.kind,definitions:[E(i,l)]};i.hasOwnProperty("loc")&&(d.loc=i.loc);var r=N[l]||new Set,u=new Set,c=new Set;for(r.forEach(function(o){c.add(o)});c.size>0;){var f=c;c=new Set,f.forEach(function(o){if(!u.has(o)){u.add(o);var m=N[o]||new Set;m.forEach(function(a){c.add(a)})}})}return u.forEach(function(o){var m=E(i,o);m&&d.definitions.push(m)}),d}H(k,"updateAdmin");const J={class:"content d-flex flex-column flex-column-fluid",id:"kt_content"},W={class:"container-xxl",id:"kt_content_container"},X=["onSubmit"],Z={class:"d-flex flex-column gap-7 gap-lg-10 w-100 w-lg-300px mb-7 me-lg-10"},ee={class:"card card-flush py-4"},ae=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"Display Picture")])],-1),te={class:"card-body text-center pt-0"},ie={class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"change","data-bs-toggle":"tooltip",title:"Change Image"},ne=e("i",{class:"bi bi-pencil-fill fs-7"},null,-1),se=e("span",{class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"cancel","data-bs-toggle":"tooltip",title:"Cancel Image"},[e("i",{class:"bi bi-x fs-2"})],-1),le=e("span",{class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"remove","data-bs-toggle":"tooltip",title:"Remove Image"},[e("i",{class:"bi bi-x fs-2"})],-1),de=e("div",{class:"text-muted fs-7"},"Set the display picture. Only *.png, *.jpg and *.jpeg image files are accepted",-1),re={class:"d-flex flex-column flex-row-fluid gap-7 gap-lg-10"},oe={class:"d-flex flex-column gap-7 gap-lg-10"},ue=M('<ul class="nav nav-custom nav-tabs nav-line-tabs nav-line-tabs-2x border-0 fs-4 fw-bold mb-n2"><li class="nav-item"><a class="nav-link text-active-primary pb-4 active" data-bs-toggle="tab" href="#general">General</a></li><li class="nav-item"><a class="nav-link text-active-primary pb-4" data-bs-toggle="tab" href="#credentials">Credentials</a></li></ul>',1),ce={class:"tab-content"},me={class:"tab-pane fade show active",id:"general",role:"tab-panel"},pe={class:"d-flex flex-column gap-7 gap-lg-10"},ve={class:"card card-flush py-4"},fe=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"General")])],-1),be={class:"card-body pt-0"},_e={class:"mb-10 fv-row"},ke=e("label",{class:"required form-label"},"First Name",-1),ge={class:"mb-10 fv-row"},he=e("label",{class:"required form-label"},"Last Name",-1),ye={class:"mb-10 fv-row d-flex flex-column"},xe=e("label",{class:"form-label"},"Status",-1),we={class:"btn-group w-50","data-kt-buttons":"true","data-kt-buttons-target":"[data-kt-button]"},Ne=["checked"],Se=w(" Enabled "),Ve=["checked"],Ae=w(" Disabled "),De={class:"tab-pane fade",id:"credentials",role:"tab-panel"},je={class:"d-flex flex-column gap-7 gap-lg-10"},Ee={class:"card card-flush py-4"},Fe=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"Credentials")])],-1),Ue={class:"card-body pt-0"},Oe={class:"mb-10 fv-row"},Te=e("label",{class:"required form-label"},"Email",-1),$e={class:"mb-10 fv-row"},Be=e("label",{class:"form-label"},"Password",-1),Ce={class:"d-flex justify-content-end"},Re=e("span",{class:"indicator-label"},"Save Changes",-1),qe=e("span",{class:"indicator-progress"},[w("Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),Ie=[Re,qe],Je={setup(i){const l=P(),d=Q();l.title="Update Admin",l.breadcrumbs=[{link:"/dashboard",title:"Dashboard"},{link:"/admins",title:"Admins"},{link:"",title:"Update Admin"}];const r=O(),{result:u,loading:c}=T(Y,{slug:r.currentRoute.value.params.slug});let f=b(null),o=b(null),m=b(null),a=A({id:"",first_name:"",last_name:"",display_picture:null,user:{update:{id:"",email:"",password:"",status:1}}}),h=b(null),p=A({});const{mutate:F,onDone:Me,onError:Pe}=$(k),U=()=>{m.validate().then(async function(y){if(y=="Valid"){o.value.setAttribute("data-kt-indicator","on"),o.value.disabled=!0;try{const t=await F(a,{context:{hasUpload:!0}});o.value.removeAttribute("data-kt-indicator"),o.value.disabled=!1,d.updateUser(t.data.updateAdmin)}catch{o.value.removeAttribute("data-kt-indicator"),o.value.disabled=!1}}else L.fire({text:"Sorry, looks like there are some errors detected, please try again.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})})},S=(y,t,s)=>{if(t=="display_picture")if(s=="set"){let V=new Blob(h.value.files,{type:"image/*"});V.name=h.value.files[0].name,a.display_picture=V}else a.display_picture=null};return B(()=>{u.value&&(u.value.admin?(p=u.value.admin,a.id=p.id,a.first_name=p.first_name,a.last_name=p.last_name,a.user.update.status=p.user.status?1:0,a.user.update.id=p.user.id,a.user.update.email=p.user.email):r.push("/admins"))}),C(()=>{m=K(f.value,{first_name:{validators:{notEmpty:{message:"first name is required"}}},last_name:{validators:{notEmpty:{message:"last name is required"}}},email:{validators:{notEmpty:{message:"email is required"}}}}),z.init(),G.initButtons()}),(y,t)=>(R(),q("div",J,[e("div",W,[e("form",{onSubmit:D(U,["prevent"]),ref_key:"form",ref:f,class:"form fv-plugins-bootstrap5 fv-plugins-framework d-flex flex-column flex-lg-row"},[e("div",Z,[e("div",ee,[ae,e("div",te,[e("div",{class:x([{"image-input-empty":!n(c)&&!n(u).admin.display_picture!=""},"image-input image-input-outline mb-3"]),"data-kt-image-input":"true",style:{"background-image":"url(/media/svg/files/blank-image.svg)"}},[e("div",{class:"image-input-wrapper w-150px h-150px",style:I(n(c)?"":`background-image: url(${n(u).admin.display_picture})`)},null,4),e("label",ie,[ne,e("input",{ref_key:"display_picture",ref:h,onChange:t[0]||(t[0]=s=>S(s,"display_picture","set")),type:"file",name:"display_picture",accept:".png, .jpg, .jpeg"},null,544),e("input",{type:"hidden",onClick:t[1]||(t[1]=s=>S(s,"display_picture","remove")),name:"display_picture_remove"})]),se,le],2),de])])]),e("div",re,[e("div",oe,[ue,e("div",ce,[e("div",me,[e("div",pe,[e("div",ve,[fe,e("div",be,[e("div",_e,[ke,v(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>n(a).first_name=s),type:"text",name:"first_name",class:"form-control mb-2",placeholder:"First Name"},null,512),[[_,n(a).first_name]])]),e("div",ge,[he,v(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>n(a).last_name=s),type:"text",name:"last_name",class:"form-control mb-2",placeholder:"Last Name"},null,512),[[_,n(a).last_name]])]),e("div",ye,[xe,e("div",we,[e("label",{class:x(["btn btn-outline-secondary text-muted text-hover-white text-active-white btn-outline btn-active-success",{active:n(a).user.update.status==1}]),"data-kt-button":"true"},[v(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>n(a).user.update.status=s),class:"btn-check",type:"radio",name:"status",value:1,checked:n(a).user.update.status==1?"checked":""},null,8,Ne),[[j,n(a).user.update.status]]),Se],2),e("label",{class:x(["btn btn-outline-secondary text-muted text-hover-white text-active-white btn-outline btn-active-danger",{active:n(a).user.update.status==0}]),"data-kt-button":"true"},[v(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>n(a).user.update.status=s),class:"btn-check",type:"radio",name:"status",value:0,checked:n(a).user.update.status==0?"checked":""},null,8,Ve),[[j,n(a).user.update.status]]),Ae],2)])])])])])]),e("div",De,[e("div",je,[e("div",Ee,[Fe,e("div",Ue,[e("div",Oe,[Te,v(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>n(a).user.update.email=s),type:"text",name:"email",class:"form-control mb-2",placeholder:"Email"},null,512),[[_,n(a).user.update.email]])]),e("div",$e,[Be,v(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>n(a).user.update.password=s),type:"password",name:"password",class:"form-control mb-2",placeholder:"Password"},null,512),[[_,n(a).user.update.password]])])])])])])])]),e("div",Ce,[e("button",{onClick:t[8]||(t[8]=D(s=>n(r).go(-1),["prevent"])),id:"admin_edit_cancel",class:"btn btn-light me-5"},"Cancel"),e("button",{ref_key:"submitButton",ref:o,type:"submit",id:"submitButton",class:"btn btn-primary"},Ie,512)])])],40,X)])]))}};export{Je as default};
