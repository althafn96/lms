var q=Object.defineProperty;var S=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var j=(i,s,l)=>s in i?q(i,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[s]=l,D=(i,s)=>{for(var l in s||(s={}))B.call(s,l)&&j(i,l,s[l]);if(S)for(var l of S(s))A.call(s,l)&&j(i,l,s[l]);return i};import{u as M,y as _,N as R,a0 as L,k as P,g as G,r as K,i as Q,l as z,m as e,O as E,n as I,q as o,P as m,Q as b,R as T,s as H,x}from"./vendor.9ac200cc.js";import"./getInstructor.5f18a601.js";import{d as J}from"./getLocationsToSelect.34aa23e1.js";import{u as W,K as X,a as Y}from"./app.52277fe1.js";import"./sweetalert2.1b53689f.js";import{C as Z}from"./ckeditor.80e0daed.js";import{v as ee}from"./useValidator.4107c1a7.js";import{s as ae}from"./vue-multiselect.esm.f7127d48.js";import"./Bootstrap5.88c59918.js";var k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"addInstructor"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first_name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last_name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"bio"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"display_picture"}},type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contact_number"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"address"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user"}},type:{kind:"NamedType",name:{kind:"Name",value:"InstructorUserMorphOne"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locations"}},type:{kind:"NamedType",name:{kind:"Name",value:"LocationBelongsToMany"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createInstructor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"first_name"},value:{kind:"Variable",name:{kind:"Name",value:"first_name"}}},{kind:"ObjectField",name:{kind:"Name",value:"last_name"},value:{kind:"Variable",name:{kind:"Name",value:"last_name"}}},{kind:"ObjectField",name:{kind:"Name",value:"bio"},value:{kind:"Variable",name:{kind:"Name",value:"bio"}}},{kind:"ObjectField",name:{kind:"Name",value:"display_picture"},value:{kind:"Variable",name:{kind:"Name",value:"display_picture"}}},{kind:"ObjectField",name:{kind:"Name",value:"contact_number"},value:{kind:"Variable",name:{kind:"Name",value:"contact_number"}}},{kind:"ObjectField",name:{kind:"Name",value:"address"},value:{kind:"Variable",name:{kind:"Name",value:"address"}}},{kind:"ObjectField",name:{kind:"Name",value:"user"},value:{kind:"Variable",name:{kind:"Name",value:"user"}}},{kind:"ObjectField",name:{kind:"Name",value:"locations"},value:{kind:"Variable",name:{kind:"Name",value:"locations"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"full_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:652}};k.loc.source={body:`mutation addInstructor (\r
    $first_name: String!,\r
    $last_name: String!,\r
    $bio: String,\r
    $display_picture: Upload,\r
    $contact_number: String,\r
    $address: String,\r
    $user: InstructorUserMorphOne,\r
    $locations: LocationBelongsToMany\r
) {\r
    createInstructor (\r
        input: {\r
            first_name: $first_name,\r
            last_name: $last_name,\r
            bio: $bio,\r
            display_picture: $display_picture,\r
            contact_number: $contact_number,\r
            address: $address,\r
            user: $user,\r
            locations: $locations\r
        }\r
    ) {\r
        full_name\r
        slug\r
    }\r
}\r
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function h(i,s){if(i.kind==="FragmentSpread")s.add(i.name.value);else if(i.kind==="VariableDefinition"){var l=i.type;l.kind==="NamedType"&&s.add(l.name.value)}i.selectionSet&&i.selectionSet.selections.forEach(function(r){h(r,s)}),i.variableDefinitions&&i.variableDefinitions.forEach(function(r){h(r,s)}),i.definitions&&i.definitions.forEach(function(r){h(r,s)})}var N={};(function(){k.definitions.forEach(function(s){if(s.name){var l=new Set;h(s,l),N[s.name.value]=l}})})();function $(i,s){for(var l=0;l<i.definitions.length;l++){var r=i.definitions[l];if(r.name&&r.name.value==s)return r}}function te(i,s){var l={kind:i.kind,definitions:[$(i,s)]};i.hasOwnProperty("loc")&&(l.loc=i.loc);var r=N[s]||new Set,d=new Set,u=new Set;for(r.forEach(function(c){u.add(c)});u.size>0;){var n=u;u=new Set,n.forEach(function(c){if(!d.has(c)){d.add(c);var p=N[c]||new Set;p.forEach(function(g){u.add(g)})}})}return d.forEach(function(c){var p=$(i,c);p&&l.definitions.push(p)}),l}te(k,"addInstructor");const ie={class:"content d-flex flex-column flex-column-fluid",id:"kt_content"},ne={class:"container-xxl",id:"kt_content_container"},se=["onSubmit"],le={class:"d-flex flex-column gap-7 gap-lg-10 w-100 w-lg-300px mb-7 me-lg-10"},oe={class:"card card-flush py-4"},re=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"DIsplay Picture")])],-1),de={class:"card-body text-center pt-0"},ce={class:"image-input image-input-empty image-input-outline mb-3","data-kt-image-input":"true",style:{"background-image":"url(/media/svg/files/blank-image.svg)"}},ue=e("div",{class:"image-input-wrapper w-150px h-150px"},null,-1),me={class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"change","data-bs-toggle":"tooltip",title:"Change Image"},pe=e("i",{class:"bi bi-pencil-fill fs-7"},null,-1),be=e("span",{class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"cancel","data-bs-toggle":"tooltip",title:"Cancel Image"},[e("i",{class:"bi bi-x fs-2"})],-1),ve=e("span",{class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"remove","data-bs-toggle":"tooltip",title:"Remove Image"},[e("i",{class:"bi bi-x fs-2"})],-1),fe=e("div",{class:"text-muted fs-7"},"Set the instructor image. Only *.png, *.jpg and *.jpeg image files are accepted",-1),_e={class:"card card-flush py-4"},ke=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"Institutions")])],-1),he={class:"card-body text-center pt-0"},ge={class:"mb-10 fv-row"},ye={class:"d-flex flex-column flex-row-fluid gap-7 gap-lg-10"},xe={class:"d-flex flex-column gap-7 gap-lg-10"},Ne=H('<ul class="nav nav-custom nav-tabs nav-line-tabs nav-line-tabs-2x border-0 fs-4 fw-bold mb-n2"><li class="nav-item"><a class="nav-link text-active-primary pb-4 active" data-bs-toggle="tab" href="#general">General</a></li><li class="nav-item"><a class="nav-link text-active-primary pb-4" data-bs-toggle="tab" href="#credentials">Credentials</a></li></ul>',1),we={class:"tab-content"},Ve={class:"tab-pane fade show active",id:"general",role:"tab-panel"},Se={class:"d-flex flex-column gap-7 gap-lg-10"},je={class:"card card-flush py-4"},De=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"General")])],-1),Ee={class:"card-body pt-0"},Ie={class:"mb-10 fv-row"},Te=e("label",{class:"required form-label"},"First Name",-1),$e={class:"mb-10 fv-row"},Ce=e("label",{class:"required form-label"},"Last Name",-1),Oe={class:"mb-10 fv-row"},Fe=e("label",{class:"form-label"},"Bio",-1),Ue={class:"mb-10 fv-row"},qe=e("label",{class:"form-label"},"Contact Number",-1),Be={class:"mb-10 fv-row"},Ae=e("label",{class:"form-label"},"Address",-1),Me={class:"mb-10 fv-row d-flex flex-column"},Re=e("label",{class:"form-label"},"Status",-1),Le={class:"btn-group w-50","data-kt-buttons":"true","data-kt-buttons-target":"[data-kt-button]"},Pe={class:"btn btn-outline-secondary text-muted text-hover-white text-active-white btn-outline btn-active-success active","data-kt-button":"true"},Ge=x(" Enabled "),Ke={class:"btn btn-outline-secondary text-muted text-hover-white text-active-white btn-outline btn-active-danger","data-kt-button":"true"},Qe=x(" Disabled "),ze={class:"tab-pane fade",id:"credentials",role:"tab-panel"},He={class:"d-flex flex-column gap-7 gap-lg-10"},Je={class:"card card-flush py-4"},We=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"Credentials")])],-1),Xe={class:"card-body pt-0"},Ye={class:"mb-10 fv-row"},Ze=e("label",{class:"required form-label"},"Email",-1),ea={class:"mb-10 fv-row"},aa=e("label",{class:"required form-label"},"Password",-1),ta={class:"d-flex justify-content-end"},ia=e("span",{class:"indicator-label"},"Save Changes",-1),na=e("span",{class:"indicator-progress"},[x("Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),sa=[ia,na],ka={setup(i){const s=W();s.title="Add Instructor",s.breadcrumbs=[{link:"/dashboard",title:"Dashboard"},{link:"/instructors",title:"instructors"},{link:"",title:"Add Instructor"}];const l=M();let r=_(null),d=_(null),u=_(null),n=R({first_name:"",last_name:"",bio:"",contact_number:"",address:"",display_picture:null,selected_locations:[],locations:{sync:[]},user:{create:{email:"",password:"",status:1}}}),c=Z,p={};const{resolveClient:g}=L(),C=g();let y=_(null),w=_([]);const{mutate:O,onDone:la,onError:oa}=P(k),F=()=>{u.validate().then(async function(v){if(v=="Valid"){n.locations.sync=[],n.selected_locations.length&&n.selected_locations.forEach(function(a,f){n.locations.sync.push(a.id)}),d.value.setAttribute("data-kt-indicator","on"),d.value.disabled=!0;try{const a=await O(D({},n),{context:{hasUpload:!0}});alert("instructor added successfully"),l.push("/instructors"),d.value.removeAttribute("data-kt-indicator"),d.value.disabled=!1}catch(a){alert("error occurred. please try again later."),console.log(a),d.value.removeAttribute("data-kt-indicator"),d.value.disabled=!1}}else alert("Sorry, looks like there are some errors detected, please try again.")})},V=(v,a,f)=>{if(a=="display_picture")if(f=="set"){let t=new Blob(y.value.files,{type:"image/*"});t.name=y.value.files[0].name,n.display_picture=t}else n.display_picture=null},U=async()=>{const{data:v,loading:a,fetch:f}=await C.query({query:J},{fetchPolicy:"network-only"});w.value=v.locations.data.map(function(t){return{id:t.id,name:t.name}})};return G(()=>{u=ee(r.value,{first_name:{validators:{notEmpty:{message:"first name is required"}}},last_name:{validators:{notEmpty:{message:"last name is required"}}},email:{validators:{notEmpty:{message:"email is required"}}},password:{validators:{notEmpty:{message:"password is required"}}}}),X.init(),Y.initButtons()}),(v,a)=>{const f=K("ckeditor");return Q(),z("div",ie,[e("div",ne,[e("form",{onSubmit:E(F,["prevent"]),ref_key:"form",ref:r,class:"form fv-plugins-bootstrap5 fv-plugins-framework d-flex flex-column flex-lg-row"},[e("div",le,[e("div",oe,[re,e("div",de,[e("div",ce,[ue,e("label",me,[pe,e("input",{ref_key:"display_picture",ref:y,onChange:a[0]||(a[0]=t=>V(t,"display_picture","set")),type:"file",name:"display_picture",accept:".png, .jpg, .jpeg"},null,544),e("input",{type:"hidden",onClick:a[1]||(a[1]=t=>V(t,"display_picture","remove")),name:"display_picture_remove"})]),be,ve]),fe])]),e("div",_e,[ke,e("div",he,[e("div",ge,[I(o(ae),{modelValue:o(n).selected_locations,"onUpdate:modelValue":a[2]||(a[2]=t=>o(n).selected_locations=t),onSearchChange:U,"track-by":"id",label:"name","show-labels":!1,multiple:!0,"close-on-select":!1,noOptionsText:"Enter Location",placeholder:"Search a Location",options:o(w)},null,8,["modelValue","options"])])])])]),e("div",ye,[e("div",xe,[Ne,e("div",we,[e("div",Ve,[e("div",Se,[e("div",je,[De,e("div",Ee,[e("div",Ie,[Te,m(e("input",{"onUpdate:modelValue":a[3]||(a[3]=t=>o(n).first_name=t),type:"text",name:"first_name",class:"form-control mb-2",placeholder:"First Name"},null,512),[[b,o(n).first_name]])]),e("div",$e,[Ce,m(e("input",{"onUpdate:modelValue":a[4]||(a[4]=t=>o(n).last_name=t),type:"text",name:"last_name",class:"form-control mb-2",placeholder:"Last Name"},null,512),[[b,o(n).last_name]])]),e("div",Oe,[Fe,I(f,{editor:o(c),modelValue:o(n).bio,"onUpdate:modelValue":a[5]||(a[5]=t=>o(n).bio=t),config:o(p)},null,8,["editor","modelValue","config"])]),e("div",Ue,[qe,m(e("input",{"onUpdate:modelValue":a[6]||(a[6]=t=>o(n).contact_number=t),type:"text",name:"contact_number",class:"form-control mb-2",placeholder:"Contact Number"},null,512),[[b,o(n).contact_number]])]),e("div",Be,[Ae,m(e("textarea",{"onUpdate:modelValue":a[7]||(a[7]=t=>o(n).address=t),type:"text",name:"address",class:"form-control mb-2",placeholder:"Address"},null,512),[[b,o(n).address]])]),e("div",Me,[Re,e("div",Le,[e("label",Pe,[m(e("input",{"onUpdate:modelValue":a[8]||(a[8]=t=>o(n).user.create.status=t),class:"btn-check",type:"radio",name:"status",checked:"checked",value:1},null,512),[[T,o(n).user.create.status]]),Ge]),e("label",Ke,[m(e("input",{"onUpdate:modelValue":a[9]||(a[9]=t=>o(n).user.create.status=t),class:"btn-check",type:"radio",name:"status",value:0},null,512),[[T,o(n).user.create.status]]),Qe])])])])])])]),e("div",ze,[e("div",He,[e("div",Je,[We,e("div",Xe,[e("div",Ye,[Ze,m(e("input",{"onUpdate:modelValue":a[10]||(a[10]=t=>o(n).user.create.email=t),type:"text",name:"email",class:"form-control mb-2",placeholder:"Email"},null,512),[[b,o(n).user.create.email]])]),e("div",ea,[aa,m(e("input",{"onUpdate:modelValue":a[11]||(a[11]=t=>o(n).user.create.password=t),type:"password",name:"password",class:"form-control mb-2",placeholder:"Password"},null,512),[[b,o(n).user.create.password]])])])])])])])]),e("div",ta,[e("button",{onClick:a[12]||(a[12]=E(t=>o(l).go(-1),["prevent"])),id:"instructor_create_cancel",class:"btn btn-light me-5"},"Cancel"),e("button",{ref_key:"submitButton",ref:d,type:"submit",id:"submitButton",class:"btn btn-primary"},sa,512)])])],40,se)])])}}};export{ka as default};
