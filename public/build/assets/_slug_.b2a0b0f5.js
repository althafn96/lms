import{u as q,U as B,y as k,N as E,a0 as M,k as A,a7 as I,g as P,i as z,l as G,m as e,O,Y as w,q as d,a8 as Q,P as v,Q as b,a6 as L,R as T,s as K,x}from"./vendor.9ac200cc.js";import{u as Y,K as H,a as J}from"./app.52277fe1.js";import{v as W}from"./useValidator.4107c1a7.js";import"./Bootstrap5.88c59918.js";var _={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateStudent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first_name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last_name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"dob"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"gender"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"display_picture"}},type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contact_number"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"address"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user"}},type:{kind:"NamedType",name:{kind:"Name",value:"StudentUserMorphOne"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateStudent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"first_name"},value:{kind:"Variable",name:{kind:"Name",value:"first_name"}}},{kind:"ObjectField",name:{kind:"Name",value:"last_name"},value:{kind:"Variable",name:{kind:"Name",value:"last_name"}}},{kind:"ObjectField",name:{kind:"Name",value:"dob"},value:{kind:"Variable",name:{kind:"Name",value:"dob"}}},{kind:"ObjectField",name:{kind:"Name",value:"gender"},value:{kind:"Variable",name:{kind:"Name",value:"gender"}}},{kind:"ObjectField",name:{kind:"Name",value:"display_picture"},value:{kind:"Variable",name:{kind:"Name",value:"display_picture"}}},{kind:"ObjectField",name:{kind:"Name",value:"contact_number"},value:{kind:"Variable",name:{kind:"Name",value:"contact_number"}}},{kind:"ObjectField",name:{kind:"Name",value:"address"},value:{kind:"Variable",name:{kind:"Name",value:"address"}}},{kind:"ObjectField",name:{kind:"Name",value:"user"},value:{kind:"Variable",name:{kind:"Name",value:"user"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"full_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:655}};_.loc.source={body:`mutation updateStudent (\r
    $id: ID!,\r
    $first_name: String!,\r
    $last_name: String!,\r
    $dob: String,\r
    $gender: String,\r
    $display_picture: Upload,\r
    $contact_number: String,\r
    $address: String,\r
    $user: StudentUserMorphOne\r
) {\r
    updateStudent (\r
        id: $id,\r
        input: {\r
            first_name: $first_name,\r
            last_name: $last_name,\r
            dob: $dob,\r
            gender: $gender,\r
            display_picture: $display_picture,\r
            contact_number: $contact_number,\r
            address: $address,\r
            user: $user\r
        }\r
    ) {\r
        full_name\r
        slug\r
    }\r
}\r
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function g(a,i){if(a.kind==="FragmentSpread")i.add(a.name.value);else if(a.kind==="VariableDefinition"){var n=a.type;n.kind==="NamedType"&&i.add(n.name.value)}a.selectionSet&&a.selectionSet.selections.forEach(function(s){g(s,i)}),a.variableDefinitions&&a.variableDefinitions.forEach(function(s){g(s,i)}),a.definitions&&a.definitions.forEach(function(s){g(s,i)})}var V={};(function(){_.definitions.forEach(function(i){if(i.name){var n=new Set;g(i,n),V[i.name.value]=n}})})();function j(a,i){for(var n=0;n<a.definitions.length;n++){var s=a.definitions[n];if(s.name&&s.name.value==i)return s}}function X(a,i){var n={kind:a.kind,definitions:[j(a,i)]};a.hasOwnProperty("loc")&&(n.loc=a.loc);var s=V[i]||new Set,m=new Set,u=new Set;for(s.forEach(function(o){u.add(o)});u.size>0;){var c=u;u=new Set,c.forEach(function(o){if(!m.has(o)){m.add(o);var t=V[o]||new Set;t.forEach(function(f){u.add(f)})}})}return m.forEach(function(o){var t=j(a,o);t&&n.definitions.push(t)}),n}X(_,"updateStudent");var h={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getStudent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"student"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"first_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"last_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dob"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"gender"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_picture"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"humanized_created_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:305}};h.loc.source={body:`query getStudent($slug: String!) {\r
    student(slug: $slug) {\r
        id\r
        first_name\r
        last_name\r
        dob\r
        gender\r
        display_picture\r
        humanized_created_at\r
        slug\r
        user {\r
            id\r
            email\r
            status\r
        }\r
    }\r
}\r
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function y(a,i){if(a.kind==="FragmentSpread")i.add(a.name.value);else if(a.kind==="VariableDefinition"){var n=a.type;n.kind==="NamedType"&&i.add(n.name.value)}a.selectionSet&&a.selectionSet.selections.forEach(function(s){y(s,i)}),a.variableDefinitions&&a.variableDefinitions.forEach(function(s){y(s,i)}),a.definitions&&a.definitions.forEach(function(s){y(s,i)})}var D={};(function(){h.definitions.forEach(function(i){if(i.name){var n=new Set;y(i,n),D[i.name.value]=n}})})();function R(a,i){for(var n=0;n<a.definitions.length;n++){var s=a.definitions[n];if(s.name&&s.name.value==i)return s}}function Z(a,i){var n={kind:a.kind,definitions:[R(a,i)]};a.hasOwnProperty("loc")&&(n.loc=a.loc);var s=D[i]||new Set,m=new Set,u=new Set;for(s.forEach(function(o){u.add(o)});u.size>0;){var c=u;u=new Set,c.forEach(function(o){if(!m.has(o)){m.add(o);var t=D[o]||new Set;t.forEach(function(f){u.add(f)})}})}return m.forEach(function(o){var t=R(a,o);t&&n.definitions.push(t)}),n}Z(h,"getStudent");const ee={class:"content d-flex flex-column flex-column-fluid",id:"kt_content"},ae={class:"container-xxl",id:"kt_content_container"},te=["onSubmit"],ie={class:"d-flex flex-column gap-7 gap-lg-10 w-100 w-lg-300px mb-7 me-lg-10"},ne={class:"card card-flush py-4"},se=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"Display Picture")])],-1),le={class:"card-body text-center pt-0"},de={class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"change","data-bs-toggle":"tooltip",title:"Change Image"},re=e("i",{class:"bi bi-pencil-fill fs-7"},null,-1),oe=e("span",{class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"cancel","data-bs-toggle":"tooltip",title:"Cancel Image"},[e("i",{class:"bi bi-x fs-2"})],-1),ue=e("span",{class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"remove","data-bs-toggle":"tooltip",title:"Remove Image"},[e("i",{class:"bi bi-x fs-2"})],-1),ce=e("div",{class:"text-muted fs-7"},"Set the display picture. Only *.png, *.jpg and *.jpeg image files are accepted",-1),me={class:"d-flex flex-column flex-row-fluid gap-7 gap-lg-10"},pe={class:"d-flex flex-column gap-7 gap-lg-10"},ve=K('<ul class="nav nav-custom nav-tabs nav-line-tabs nav-line-tabs-2x border-0 fs-4 fw-bold mb-n2"><li class="nav-item"><a class="nav-link text-active-primary pb-4 active" data-bs-toggle="tab" href="#general">General</a></li><li class="nav-item"><a class="nav-link text-active-primary pb-4" data-bs-toggle="tab" href="#credentials">Credentials</a></li></ul>',1),fe={class:"tab-content"},be={class:"tab-pane fade show active",id:"general",role:"tab-panel"},ke={class:"d-flex flex-column gap-7 gap-lg-10"},_e={class:"card card-flush py-4"},ge=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"General")])],-1),he={class:"card-body pt-0"},ye={class:"mb-10 fv-row"},Ne=e("label",{class:"required form-label"},"First Name",-1),Se={class:"mb-10 fv-row"},we=e("label",{class:"required form-label"},"Last Name",-1),xe={class:"mb-10 fv-row"},Ve=e("label",{class:"form-label"},"DOB",-1),De={class:"mb-10 fv-row"},Fe=e("label",{class:"form-label"},"Gender",-1),$e=e("option",{value:""},"Choose Gender",-1),Ee=e("option",{value:"Male"},"Male",-1),Oe=e("option",{value:"Female"},"Female",-1),Te=e("option",{value:"Other"},"Other",-1),je=[$e,Ee,Oe,Te],Re={class:"mb-10 fv-row d-flex flex-column"},Ue=e("label",{class:"form-label"},"Status",-1),Ce={class:"btn-group w-50","data-kt-buttons":"true","data-kt-buttons-target":"[data-kt-button]"},qe=["checked"],Be=x(" Enabled "),Me=["checked"],Ae=x(" Disabled "),Ie={class:"tab-pane fade",id:"credentials",role:"tab-panel"},Pe={class:"d-flex flex-column gap-7 gap-lg-10"},ze={class:"card card-flush py-4"},Ge=e("div",{class:"card-header"},[e("div",{class:"card-title"},[e("h2",null,"Credentials")])],-1),Qe={class:"card-body pt-0"},Le={class:"mb-10 fv-row"},Ke=e("label",{class:"required form-label"},"Email",-1),Ye={class:"mb-10 fv-row"},He=e("label",{class:"form-label"},"Password",-1),Je={class:"d-flex justify-content-end"},We=e("span",{class:"indicator-label"},"Save Changes",-1),Xe=e("span",{class:"indicator-progress"},[x("Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),Ze=[We,Xe],la={setup(a){const i=Y();i.title="Update Student",i.breadcrumbs=[{link:"/dashboard",title:"Dashboard"},{link:"/students",title:"Student"},{link:"",title:"Update Student"}];const n=q(),{result:s,loading:m}=B(h,{slug:n.currentRoute.value.params.slug});let u=k(null),c=k(null),o=k(null),t=E({id:"",first_name:"",last_name:"",gender:"",dob:"",contact_number:"",address:"",display_picture:null,user:{update:{id:"",email:"",password:"",status:1}}});const{resolveClient:f}=M();f();let N=k(null),p=E({});const{mutate:U,onDone:ea,onError:aa}=A(_),C=()=>{o.validate().then(async function(S){if(S=="Valid"){c.value.setAttribute("data-kt-indicator","on"),c.value.disabled=!0;try{const l=await U(t,{context:{hasUpload:!0}});alert("student updated successfully"),c.value.removeAttribute("data-kt-indicator"),c.value.disabled=!1}catch{alert("error occurred. please try again later."),c.value.removeAttribute("data-kt-indicator"),c.value.disabled=!1}}else alert("Sorry, looks like there are some errors detected, please try again.")})},F=(S,l,r)=>{if(l=="display_picture")if(r=="set"){let $=new Blob(N.value.files,{type:"image/*"});$.name=N.value.files[0].name,t.display_picture=$}else t.display_picture=null};return I(()=>{s.value&&(s.value.student?(p=s.value.student,t.id=p.id,t.first_name=p.first_name,t.last_name=p.last_name,t.gender=p.gender,t.dob=p.dob,t.user.update.status=p.user.status?1:0,t.user.update.id=p.user.id,t.user.update.email=p.user.email):n.push("/students"))}),P(()=>{o=W(u.value,{first_name:{validators:{notEmpty:{message:"first name is required"}}},last_name:{validators:{notEmpty:{message:"last name is required"}}},email:{validators:{notEmpty:{message:"email is required"}}}}),H.init(),J.initButtons()}),(S,l)=>(z(),G("div",ee,[e("div",ae,[e("form",{onSubmit:O(C,["prevent"]),ref_key:"form",ref:u,class:"form fv-plugins-bootstrap5 fv-plugins-framework d-flex flex-column flex-lg-row"},[e("div",ie,[e("div",ne,[se,e("div",le,[e("div",{class:w([{"image-input-empty":!d(m)&&!d(s).student.display_picture!=""},"image-input image-input-outline mb-3"]),"data-kt-image-input":"true",style:{"background-image":"url(/media/svg/files/blank-image.svg)"}},[e("div",{class:"image-input-wrapper w-150px h-150px",style:Q(d(m)?"":`background-image: url(${d(s).student.display_picture})`)},null,4),e("label",de,[re,e("input",{ref_key:"display_picture",ref:N,onChange:l[0]||(l[0]=r=>F(r,"display_picture","set")),type:"file",name:"display_picture",accept:".png, .jpg, .jpeg"},null,544),e("input",{type:"hidden",onClick:l[1]||(l[1]=r=>F(r,"display_picture","remove")),name:"display_picture_remove"})]),oe,ue],2),ce])])]),e("div",me,[e("div",pe,[ve,e("div",fe,[e("div",be,[e("div",ke,[e("div",_e,[ge,e("div",he,[e("div",ye,[Ne,v(e("input",{"onUpdate:modelValue":l[2]||(l[2]=r=>d(t).first_name=r),type:"text",name:"first_name",class:"form-control mb-2",placeholder:"First Name"},null,512),[[b,d(t).first_name]])]),e("div",Se,[we,v(e("input",{"onUpdate:modelValue":l[3]||(l[3]=r=>d(t).last_name=r),type:"text",name:"last_name",class:"form-control mb-2",placeholder:"Last Name"},null,512),[[b,d(t).last_name]])]),e("div",xe,[Ve,v(e("input",{"onUpdate:modelValue":l[4]||(l[4]=r=>d(t).dob=r),type:"date",name:"dob",class:"form-control mb-2",placeholder:"Data of Birth"},null,512),[[b,d(t).dob]])]),e("div",De,[Fe,v(e("select",{class:"form-control mb-2","onUpdate:modelValue":l[5]||(l[5]=r=>d(t).gender=r)},je,512),[[L,d(t).gender]])]),e("div",Re,[Ue,e("div",Ce,[e("label",{class:w(["btn btn-outline-secondary text-muted text-hover-white text-active-white btn-outline btn-active-success",{active:d(t).user.update.status==1}]),"data-kt-button":"true"},[v(e("input",{"onUpdate:modelValue":l[6]||(l[6]=r=>d(t).user.update.status=r),class:"btn-check",type:"radio",name:"status",value:1,checked:d(t).user.update.status==1?"checked":""},null,8,qe),[[T,d(t).user.update.status]]),Be],2),e("label",{class:w(["btn btn-outline-secondary text-muted text-hover-white text-active-white btn-outline btn-active-danger",{active:d(t).user.update.status==0}]),"data-kt-button":"true"},[v(e("input",{"onUpdate:modelValue":l[7]||(l[7]=r=>d(t).user.update.status=r),class:"btn-check",type:"radio",name:"status",value:0,checked:d(t).user.update.status==0?"checked":""},null,8,Me),[[T,d(t).user.update.status]]),Ae],2)])])])])])]),e("div",Ie,[e("div",Pe,[e("div",ze,[Ge,e("div",Qe,[e("div",Le,[Ke,v(e("input",{"onUpdate:modelValue":l[8]||(l[8]=r=>d(t).user.update.email=r),type:"text",name:"email",class:"form-control mb-2",placeholder:"Email"},null,512),[[b,d(t).user.update.email]])]),e("div",Ye,[He,v(e("input",{"onUpdate:modelValue":l[9]||(l[9]=r=>d(t).user.update.password=r),type:"password",name:"password",class:"form-control mb-2",placeholder:"Password"},null,512),[[b,d(t).user.update.password]])])])])])])])]),e("div",Je,[e("button",{onClick:l[10]||(l[10]=O(r=>d(n).go(-1),["prevent"])),id:"student_edit_cancel",class:"btn btn-light me-5"},"Cancel"),e("button",{ref_key:"submitButton",ref:c,type:"submit",id:"submitButton",class:"btn btn-primary"},Ze,512)])])],40,te)])]))}};export{la as default};
