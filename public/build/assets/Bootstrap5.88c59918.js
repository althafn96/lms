function D(){return{fns:{},clear(){this.fns={}},emit(i,...e){(this.fns[i]||[]).map(t=>t.apply(t,e))},off(i,e){if(this.fns[i]){const t=this.fns[i].indexOf(e);t>=0&&this.fns[i].splice(t,1)}},on(i,e){(this.fns[i]=this.fns[i]||[]).push(e)}}}function _(){return{filters:{},add(i,e){(this.filters[i]=this.filters[i]||[]).push(e)},clear(){this.filters={}},execute(i,e,t){if(!this.filters[i]||!this.filters[i].length)return e;let s=e;const n=this.filters[i],l=n.length;for(let a=0;a<l;a++)s=n[a].apply(s,t);return s},remove(i,e){this.filters[i]&&(this.filters[i]=this.filters[i].filter(t=>t!==e))}}}function Y(i,e,t,s){const n=(t.getAttribute("type")||"").toLowerCase(),l=t.tagName.toLowerCase();if(l==="textarea")return t.value;if(l==="select"){const a=t,r=a.selectedIndex;return r>=0?a.options.item(r).value:""}if(l==="input")if(n==="radio"||n==="checkbox"){const a=s.filter(r=>r.checked).length;return a===0?"":a+""}else return t.value;return""}function u(i,e){const t=Array.isArray(e)?e:[e];let s=i;return t.forEach(n=>{s=s.replace("%s",n)}),s}function q(){const i=e=>parseFloat(`${e}`.replace(",","."));return{validate(e){const t=e.value;if(t==="")return{valid:!0};const s=Object.assign({},{inclusive:!0,message:""},e.options),n=i(s.min),l=i(s.max);return s.inclusive?{message:u(e.l10n?s.message||e.l10n.between.default:s.message,[`${n}`,`${l}`]),valid:parseFloat(t)>=n&&parseFloat(t)<=l}:{message:u(e.l10n?s.message||e.l10n.between.notInclusive:s.message,[`${n}`,`${l}`]),valid:parseFloat(t)>n&&parseFloat(t)<l}}}}function U(){return{validate(i){return{valid:!0}}}}function T(i,e){if(typeof i=="function")return i.apply(this,e);if(typeof i=="string"){let t=i;t.substring(t.length-2)==="()"&&(t=t.substring(0,t.length-2));const s=t.split("."),n=s.pop();let l=window;for(const a of s)l=l[a];return typeof l[n]=="undefined"?null:l[n].apply(this,e)}}function Z(){return{validate(i){const e=T(i.options.callback,[i]);return typeof e=="boolean"?{valid:e}:e}}}function B(){return{validate(i){const e=i.element.tagName.toLowerCase()==="select"?i.element.querySelectorAll("option:checked").length:i.elements.filter(a=>a.checked).length,t=i.options.min?`${i.options.min}`:"",s=i.options.max?`${i.options.max}`:"";let n=i.l10n?i.options.message||i.l10n.choice.default:i.options.message;const l=!(t&&e<parseInt(t,10)||s&&e>parseInt(s,10));switch(!0){case(!!t&&!!s):n=u(i.l10n?i.l10n.choice.between:i.options.message,[t,s]);break;case!!t:n=u(i.l10n?i.l10n.choice.more:i.options.message,t);break;case!!s:n=u(i.l10n?i.l10n.choice.less:i.options.message,s);break}return{message:n,valid:l}}}}function X(i){let e=i.length;const t=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]];let s=0,n=0;for(;e--;)n+=t[s][parseInt(i.charAt(e),10)],s=1-s;return n%10==0&&n>0}const O={AMERICAN_EXPRESS:{length:[15],prefix:["34","37"]},DANKORT:{length:[16],prefix:["5019"]},DINERS_CLUB:{length:[14],prefix:["300","301","302","303","304","305","36"]},DINERS_CLUB_US:{length:[16],prefix:["54","55"]},DISCOVER:{length:[16],prefix:["6011","622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925","644","645","646","647","648","649","65"]},ELO:{length:[16],prefix:["4011","4312","4389","4514","4573","4576","5041","5066","5067","509","6277","6362","6363","650","6516","6550"]},FORBRUGSFORENINGEN:{length:[16],prefix:["600722"]},JCB:{length:[16],prefix:["3528","3529","353","354","355","356","357","358"]},LASER:{length:[16,17,18,19],prefix:["6304","6706","6771","6709"]},MAESTRO:{length:[12,13,14,15,16,17,18,19],prefix:["5018","5020","5038","5868","6304","6759","6761","6762","6763","6764","6765","6766"]},MASTERCARD:{length:[16],prefix:["51","52","53","54","55"]},SOLO:{length:[16,18,19],prefix:["6334","6767"]},UNIONPAY:{length:[16,17,18,19],prefix:["622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925"]},VISA:{length:[16],prefix:["4"]},VISA_ELECTRON:{length:[16],prefix:["4026","417500","4405","4508","4844","4913","4917"]}};function G(){return{validate(i){if(i.value==="")return{meta:{type:null},valid:!0};if(/[^0-9-\s]+/.test(i.value))return{meta:{type:null},valid:!1};const e=i.value.replace(/\D/g,"");if(!X(e))return{meta:{type:null},valid:!1};for(const t of Object.keys(O))for(const s in O[t].prefix)if(i.value.substr(0,O[t].prefix[s].length)===O[t].prefix[s]&&O[t].length.indexOf(e.length)!==-1)return{meta:{type:t},valid:!0};return{meta:{type:null},valid:!1}}}}function J(i,e,t,s){if(isNaN(i)||isNaN(e)||isNaN(t)||i<1e3||i>9999||e<=0||e>12)return!1;const n=[31,i%400==0||i%100!=0&&i%4==0?29:28,31,30,31,30,31,31,30,31,30,31];if(t<=0||t>n[e-1])return!1;if(s===!0){const l=new Date,a=l.getFullYear(),r=l.getMonth(),o=l.getDate();return i<a||i===a&&e-1<r||i===a&&e-1===r&&t<o}return!0}function K(){const i=(t,s,n)=>{const l=s.indexOf("YYYY"),a=s.indexOf("MM"),r=s.indexOf("DD");if(l===-1||a===-1||r===-1)return null;const o=t.split(" "),d=o[0].split(n);if(d.length<3)return null;const c=new Date(parseInt(d[l],10),parseInt(d[a],10)-1,parseInt(d[r],10));if(o.length>1){const f=o[1].split(":");c.setHours(f.length>0?parseInt(f[0],10):0),c.setMinutes(f.length>1?parseInt(f[1],10):0),c.setSeconds(f.length>2?parseInt(f[2],10):0)}return c},e=(t,s)=>{const n=s.replace(/Y/g,"y").replace(/M/g,"m").replace(/D/g,"d").replace(/:m/g,":M").replace(/:mm/g,":MM").replace(/:S/,":s").replace(/:SS/,":ss"),l=t.getDate(),a=l<10?`0${l}`:l,r=t.getMonth()+1,o=r<10?`0${r}`:r,d=`${t.getFullYear()}`.substr(2),c=t.getFullYear(),f=t.getHours()%12||12,m=f<10?`0${f}`:f,v=t.getHours(),b=v<10?`0${v}`:v,$=t.getMinutes(),V=$<10?`0${$}`:$,x=t.getSeconds(),k=x<10?`0${x}`:x,C={H:`${v}`,HH:`${b}`,M:`${$}`,MM:`${V}`,d:`${l}`,dd:`${a}`,h:`${f}`,hh:`${m}`,m:`${r}`,mm:`${o}`,s:`${x}`,ss:`${k}`,yy:`${d}`,yyyy:`${c}`};return n.replace(/d{1,4}|m{1,4}|yy(?:yy)?|([HhMs])\1?|"[^"]*"|'[^']*'/g,w=>C[w]?C[w]:w.slice(1,w.length-1))};return{validate(t){if(t.value==="")return{meta:{date:null},valid:!0};const s=Object.assign({},{format:t.element&&t.element.getAttribute("type")==="date"?"YYYY-MM-DD":"MM/DD/YYYY",message:""},t.options),n=t.l10n?t.l10n.date.default:s.message,l={message:`${n}`,meta:{date:null},valid:!1},a=s.format.split(" "),r=a.length>1?a[1]:null,o=a.length>2?a[2]:null,d=t.value.split(" "),c=d[0],f=d.length>1?d[1]:null;if(a.length!==d.length)return l;const m=s.separator||(c.indexOf("/")!==-1?"/":c.indexOf("-")!==-1?"-":c.indexOf(".")!==-1?".":"/");if(m===null||c.indexOf(m)===-1)return l;const v=c.split(m),b=a[0].split(m);if(v.length!==b.length)return l;const $=v[b.indexOf("YYYY")],V=v[b.indexOf("MM")],x=v[b.indexOf("DD")];if(!/^\d+$/.test($)||!/^\d+$/.test(V)||!/^\d+$/.test(x)||$.length>4||V.length>2||x.length>2)return l;const k=parseInt($,10),C=parseInt(V,10),w=parseInt(x,10);if(!J(k,C,w))return l;const p=new Date(k,C-1,w);if(r){const g=f.split(":");if(r.split(":").length!==g.length)return l;const S=g.length>0?g[0].length<=2&&/^\d+$/.test(g[0])?parseInt(g[0],10):-1:0,N=g.length>1?g[1].length<=2&&/^\d+$/.test(g[1])?parseInt(g[1],10):-1:0,H=g.length>2?g[2].length<=2&&/^\d+$/.test(g[2])?parseInt(g[2],10):-1:0;if(S===-1||N===-1||H===-1||H<0||H>60||S<0||S>=24||o&&S>12||N<0||N>59)return l;p.setHours(S),p.setMinutes(N),p.setSeconds(H)}const I=typeof s.min=="function"?s.min():s.min,L=I instanceof Date?I:I?i(I,b,m):p,y=typeof s.max=="function"?s.max():s.max,M=y instanceof Date?y:y?i(y,b,m):p,A=I instanceof Date?e(L,s.format):I,F=y instanceof Date?e(M,s.format):y;switch(!0){case(!!A&&!F):return{message:u(t.l10n?t.l10n.date.min:n,A),meta:{date:p},valid:p.getTime()>=L.getTime()};case(!!F&&!A):return{message:u(t.l10n?t.l10n.date.max:n,F),meta:{date:p},valid:p.getTime()<=M.getTime()};case(!!F&&!!A):return{message:u(t.l10n?t.l10n.date.range:n,[A,F]),meta:{date:p},valid:p.getTime()<=M.getTime()&&p.getTime()>=L.getTime()};default:return{message:`${n}`,meta:{date:p},valid:!0}}}}}function W(){return{validate(i){const e=typeof i.options.compare=="function"?i.options.compare.call(this):i.options.compare;return{valid:e===""||i.value!==e}}}}function Q(){return{validate(i){return{valid:i.value===""||/^\d+$/.test(i.value)}}}}function ee(){const i=(e,t)=>{const s=e.split(/"/),n=s.length,l=[];let a="";for(let r=0;r<n;r++)if(r%2==0){const o=s[r].split(t),d=o.length;if(d===1)a+=o[0];else{l.push(a+o[0]);for(let c=1;c<d-1;c++)l.push(o[c]);a=o[d-1]}}else a+='"'+s[r],r<n-1&&(a+='"');return l.push(a),l};return{validate(e){if(e.value==="")return{valid:!0};const t=Object.assign({},{multiple:!1,separator:/[,;]/},e.options),s=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;if(t.multiple===!0||`${t.multiple}`=="true"){const l=t.separator||/[,;]/,a=i(e.value,l),r=a.length;for(let o=0;o<r;o++)if(!s.test(a[o]))return{valid:!1};return{valid:!0}}else return{valid:s.test(e.value)}}}}function te(){return{validate(i){if(i.value==="")return{valid:!0};let e;const t=i.options.extension?i.options.extension.toLowerCase().split(","):null,s=i.options.type?i.options.type.toLowerCase().split(","):null;if(window.File&&window.FileList&&window.FileReader){const l=i.element.files,a=l.length;let r=0;if(i.options.maxFiles&&a>parseInt(`${i.options.maxFiles}`,10))return{meta:{error:"INVALID_MAX_FILES"},valid:!1};if(i.options.minFiles&&a<parseInt(`${i.options.minFiles}`,10))return{meta:{error:"INVALID_MIN_FILES"},valid:!1};let o={};for(let d=0;d<a;d++){if(r+=l[d].size,e=l[d].name.substr(l[d].name.lastIndexOf(".")+1),o={ext:e,file:l[d],size:l[d].size,type:l[d].type},i.options.minSize&&l[d].size<parseInt(`${i.options.minSize}`,10))return{meta:Object.assign({},{error:"INVALID_MIN_SIZE"},o),valid:!1};if(i.options.maxSize&&l[d].size>parseInt(`${i.options.maxSize}`,10))return{meta:Object.assign({},{error:"INVALID_MAX_SIZE"},o),valid:!1};if(t&&t.indexOf(e.toLowerCase())===-1)return{meta:Object.assign({},{error:"INVALID_EXTENSION"},o),valid:!1};if(l[d].type&&s&&s.indexOf(l[d].type.toLowerCase())===-1)return{meta:Object.assign({},{error:"INVALID_TYPE"},o),valid:!1}}if(i.options.maxTotalSize&&r>parseInt(`${i.options.maxTotalSize}`,10))return{meta:Object.assign({},{error:"INVALID_MAX_TOTAL_SIZE",totalSize:r},o),valid:!1};if(i.options.minTotalSize&&r<parseInt(`${i.options.minTotalSize}`,10))return{meta:Object.assign({},{error:"INVALID_MIN_TOTAL_SIZE",totalSize:r},o),valid:!1}}else if(e=i.value.substr(i.value.lastIndexOf(".")+1),t&&t.indexOf(e.toLowerCase())===-1)return{meta:{error:"INVALID_EXTENSION",ext:e},valid:!1};return{valid:!0}}}}function se(){return{validate(i){if(i.value==="")return{valid:!0};const e=Object.assign({},{inclusive:!0,message:""},i.options),t=parseFloat(`${e.min}`.replace(",","."));return e.inclusive?{message:u(i.l10n?e.message||i.l10n.greaterThan.default:e.message,`${t}`),valid:parseFloat(i.value)>=t}:{message:u(i.l10n?e.message||i.l10n.greaterThan.notInclusive:e.message,`${t}`),valid:parseFloat(i.value)>t}}}}function ie(){return{validate(i){const e=typeof i.options.compare=="function"?i.options.compare.call(this):i.options.compare;return{valid:e===""||i.value===e}}}}function ne(){return{validate(i){if(i.value==="")return{valid:!0};const e=Object.assign({},{decimalSeparator:".",thousandsSeparator:""},i.options),t=e.decimalSeparator==="."?"\\.":e.decimalSeparator,s=e.thousandsSeparator==="."?"\\.":e.thousandsSeparator,n=new RegExp(`^-?[0-9]{1,3}(${s}[0-9]{3})*(${t}[0-9]+)?$`),l=new RegExp(s,"g");let a=`${i.value}`;if(!n.test(a))return{valid:!1};s&&(a=a.replace(l,"")),t&&(a=a.replace(t,"."));const r=parseFloat(a);return{valid:!isNaN(r)&&isFinite(r)&&Math.floor(r)===r}}}}function le(){return{validate(i){if(i.value==="")return{valid:!0};const e=Object.assign({},{ipv4:!0,ipv6:!0},i.options),t=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\/([0-9]|[1-2][0-9]|3[0-2]))?$/,s=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*(\/(\d|\d\d|1[0-1]\d|12[0-8]))?$/;switch(!0){case(e.ipv4&&!e.ipv6):return{message:i.l10n?e.message||i.l10n.ip.ipv4:e.message,valid:t.test(i.value)};case(!e.ipv4&&e.ipv6):return{message:i.l10n?e.message||i.l10n.ip.ipv6:e.message,valid:s.test(i.value)};case(e.ipv4&&e.ipv6):default:return{message:i.l10n?e.message||i.l10n.ip.default:e.message,valid:t.test(i.value)||s.test(i.value)}}}}}function ae(){return{validate(i){if(i.value==="")return{valid:!0};const e=Object.assign({},{inclusive:!0,message:""},i.options),t=parseFloat(`${e.max}`.replace(",","."));return e.inclusive?{message:u(i.l10n?e.message||i.l10n.lessThan.default:e.message,`${t}`),valid:parseFloat(i.value)<=t}:{message:u(i.l10n?e.message||i.l10n.lessThan.notInclusive:e.message,`${t}`),valid:parseFloat(i.value)<t}}}}function re(){return{validate(i){const e=!!i.options&&!!i.options.trim,t=i.value;return{valid:!e&&t!==""||e&&t!==""&&t.trim()!==""}}}}function oe(){return{validate(i){if(i.value==="")return{valid:!0};const e=Object.assign({},{decimalSeparator:".",thousandsSeparator:""},i.options);let t=`${i.value}`;t.substr(0,1)===e.decimalSeparator?t=`0${e.decimalSeparator}${t.substr(1)}`:t.substr(0,2)===`-${e.decimalSeparator}`&&(t=`-0${e.decimalSeparator}${t.substr(2)}`);const s=e.decimalSeparator==="."?"\\.":e.decimalSeparator,n=e.thousandsSeparator==="."?"\\.":e.thousandsSeparator,l=new RegExp(`^-?[0-9]{1,3}(${n}[0-9]{3})*(${s}[0-9]+)?$`),a=new RegExp(n,"g");if(!l.test(t))return{valid:!1};n&&(t=t.replace(a,"")),s&&(t=t.replace(s,"."));const r=parseFloat(t);return{valid:!isNaN(r)&&isFinite(r)}}}}function de(){return{validate(i){return T(i.options.promise,[i])}}}function ce(){return{validate(i){if(i.value==="")return{valid:!0};const e=i.options.regexp;if(e instanceof RegExp)return{valid:e.test(i.value)};{const t=e.toString();return{valid:(i.options.flags?new RegExp(t,i.options.flags):new RegExp(t)).test(i.value)}}}}}function he(i,e){const t=s=>Object.keys(s).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(s[n])}`).join("&");return new Promise((s,n)=>{const l=Object.assign({},{crossDomain:!1,headers:{},method:"GET",params:{}},e),a=Object.keys(l.params).map(d=>`${encodeURIComponent(d)}=${encodeURIComponent(l.params[d])}`).join("&"),r=i.indexOf("?"),o=l.method==="GET"?`${i}${r?"?":"&"}${a}`:i;if(l.crossDomain){const d=document.createElement("script"),c=`___fetch${Date.now()}___`;window[c]=f=>{delete window[c],s(f)},d.src=`${o}${r?"&":"?"}callback=${c}`,d.async=!0,d.addEventListener("load",()=>{d.parentNode.removeChild(d)}),d.addEventListener("error",()=>n),document.head.appendChild(d)}else{const d=new XMLHttpRequest;d.open(l.method,o),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.method==="POST"&&d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),Object.keys(l.headers).forEach(c=>d.setRequestHeader(c,l.headers[c])),d.addEventListener("load",function(){s(JSON.parse(this.responseText))}),d.addEventListener("error",()=>n),d.send(t(l.params))}})}function fe(){const i={crossDomain:!1,data:{},headers:{},method:"GET",validKey:"valid"};return{validate(e){if(e.value==="")return Promise.resolve({valid:!0});const t=Object.assign({},i,e.options);let s=t.data;typeof t.data=="function"&&(s=t.data.call(this,e)),typeof s=="string"&&(s=JSON.parse(s)),s[t.name||e.field]=e.value;const n=typeof t.url=="function"?t.url.call(this,e):t.url;return he(n,{crossDomain:t.crossDomain,headers:t.headers,method:t.method,params:s}).then(l=>Promise.resolve({message:l.message,meta:l,valid:`${l[t.validKey]}`=="true"})).catch(l=>Promise.reject({valid:!1}))}}}function ue(){return{validate(i){if(i.value==="")return{valid:!0};const e=Object.assign({},{case:"lower"},i.options),t=(e.case||"lower").toLowerCase();return{message:e.message||(i.l10n?t==="upper"?i.l10n.stringCase.upper:i.l10n.stringCase.default:e.message),valid:t==="upper"?i.value===i.value.toUpperCase():i.value===i.value.toLowerCase()}}}}function me(){const i=e=>{let t=e.length;for(let s=e.length-1;s>=0;s--){const n=e.charCodeAt(s);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&s--}return`${t}`};return{validate(e){const t=Object.assign({},{message:"",trim:!1,utf8Bytes:!1},e.options),s=t.trim===!0||`${t.trim}`=="true"?e.value.trim():e.value;if(s==="")return{valid:!0};const n=t.min?`${t.min}`:"",l=t.max?`${t.max}`:"",a=t.utf8Bytes?i(s):s.length;let r=!0,o=e.l10n?t.message||e.l10n.stringLength.default:t.message;switch((n&&a<parseInt(n,10)||l&&a>parseInt(l,10))&&(r=!1),!0){case(!!n&&!!l):o=u(e.l10n?t.message||e.l10n.stringLength.between:t.message,[n,l]);break;case!!n:o=u(e.l10n?t.message||e.l10n.stringLength.more:t.message,`${parseInt(n,10)}`);break;case!!l:o=u(e.l10n?t.message||e.l10n.stringLength.less:t.message,`${parseInt(l,10)}`);break}return{message:o,valid:r}}}}function pe(){const i={allowEmptyProtocol:!1,allowLocal:!1,protocol:"http, https, ftp"};return{validate(e){if(e.value==="")return{valid:!0};const t=Object.assign({},i,e.options),s=t.allowLocal===!0||`${t.allowLocal}`=="true",n=t.allowEmptyProtocol===!0||`${t.allowEmptyProtocol}`=="true",l=t.protocol.split(",").join("|").replace(/\s/g,"");return{valid:new RegExp("^(?:(?:"+l+")://)"+(n?"?":"")+"(?:\\S+(?::\\S*)?@)?(?:"+(s?"":"(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})")+"(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9])*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))"+(s?"?":"")+")(?::\\d{2,5})?(?:/[^\\s]*)?$","i").test(e.value)}}}}var P={between:q,blank:U,callback:Z,choice:B,creditCard:G,date:K,different:W,digits:Q,emailAddress:ee,file:te,greaterThan:se,identical:ie,integer:ne,ip:le,lessThan:ae,notEmpty:re,numeric:oe,promise:de,regexp:ce,remote:fe,stringCase:ue,stringLength:me,uri:pe};class ge{constructor(e,t){this.elements={},this.ee=D(),this.filter=_(),this.plugins={},this.results=new Map,this.validators={},this.form=e,this.fields=t}on(e,t){return this.ee.on(e,t),this}off(e,t){return this.ee.off(e,t),this}emit(e,...t){return this.ee.emit(e,...t),this}registerPlugin(e,t){if(this.plugins[e])throw new Error(`The plguin ${e} is registered`);return t.setCore(this),t.install(),this.plugins[e]=t,this}deregisterPlugin(e){const t=this.plugins[e];return t&&t.uninstall(),delete this.plugins[e],this}registerValidator(e,t){if(this.validators[e])throw new Error(`The validator ${e} is registered`);return this.validators[e]=t,this}registerFilter(e,t){return this.filter.add(e,t),this}deregisterFilter(e,t){return this.filter.remove(e,t),this}executeFilter(e,t,s){return this.filter.execute(e,t,s)}addField(e,t){const s=Object.assign({},{selector:"",validators:{}},t);return this.fields[e]=this.fields[e]?{selector:s.selector||this.fields[e].selector,validators:Object.assign({},this.fields[e].validators,s.validators)}:s,this.elements[e]=this.queryElements(e),this.emit("core.field.added",{elements:this.elements[e],field:e,options:this.fields[e]}),this}removeField(e){if(!this.fields[e])throw new Error(`The field ${e} validators are not defined. Please ensure the field is added first`);const t=this.elements[e],s=this.fields[e];return delete this.elements[e],delete this.fields[e],this.emit("core.field.removed",{elements:t,field:e,options:s}),this}validate(){return this.emit("core.form.validating",{formValidation:this}),this.filter.execute("validate-pre",Promise.resolve(),[]).then(()=>Promise.all(Object.keys(this.fields).map(e=>this.validateField(e))).then(e=>{switch(!0){case e.indexOf("Invalid")!==-1:return this.emit("core.form.invalid",{formValidation:this}),Promise.resolve("Invalid");case e.indexOf("NotValidated")!==-1:return this.emit("core.form.notvalidated",{formValidation:this}),Promise.resolve("NotValidated");default:return this.emit("core.form.valid",{formValidation:this}),Promise.resolve("Valid")}}))}validateField(e){const t=this.results.get(e);if(t==="Valid"||t==="Invalid")return Promise.resolve(t);this.emit("core.field.validating",e);const s=this.elements[e];if(s.length===0)return this.emit("core.field.valid",e),Promise.resolve("Valid");const n=s[0].getAttribute("type");return n==="radio"||n==="checkbox"||s.length===1?this.validateElement(e,s[0]):Promise.all(s.map(l=>this.validateElement(e,l))).then(l=>{switch(!0){case l.indexOf("Invalid")!==-1:return this.emit("core.field.invalid",e),this.results.set(e,"Invalid"),Promise.resolve("Invalid");case l.indexOf("NotValidated")!==-1:return this.emit("core.field.notvalidated",e),this.results.delete(e),Promise.resolve("NotValidated");default:return this.emit("core.field.valid",e),this.results.set(e,"Valid"),Promise.resolve("Valid")}})}validateElement(e,t){this.results.delete(e);const s=this.elements[e];if(this.filter.execute("element-ignored",!1,[e,t,s]))return this.emit("core.element.ignored",{element:t,elements:s,field:e}),Promise.resolve("Ignored");const l=this.fields[e].validators;this.emit("core.element.validating",{element:t,elements:s,field:e});const a=Object.keys(l).map(r=>()=>this.executeValidator(e,t,r,l[r]));return this.waterfall(a).then(r=>{const o=r.indexOf("Invalid")===-1;this.emit("core.element.validated",{element:t,elements:s,field:e,valid:o});const d=t.getAttribute("type");return(d==="radio"||d==="checkbox"||s.length===1)&&this.emit(o?"core.field.valid":"core.field.invalid",e),Promise.resolve(o?"Valid":"Invalid")}).catch(r=>(this.emit("core.element.notvalidated",{element:t,elements:s,field:e}),Promise.resolve(r)))}executeValidator(e,t,s,n){const l=this.elements[e],a=this.filter.execute("validator-name",s,[s,e]);if(n.message=this.filter.execute("validator-message",n.message,[this.locale,e,a]),!this.validators[a]||n.enabled===!1)return this.emit("core.validator.validated",{element:t,elements:l,field:e,result:this.normalizeResult(e,a,{valid:!0}),validator:a}),Promise.resolve("Valid");const r=this.validators[a],o=this.getElementValue(e,t,a);if(!this.filter.execute("field-should-validate",!0,[e,t,o,s]))return this.emit("core.validator.notvalidated",{element:t,elements:l,field:e,validator:s}),Promise.resolve("NotValidated");this.emit("core.validator.validating",{element:t,elements:l,field:e,validator:s});const c=r().validate({element:t,elements:l,field:e,l10n:this.localization,options:n,value:o});if(typeof c.then=="function")return c.then(m=>{const v=this.normalizeResult(e,s,m);return this.emit("core.validator.validated",{element:t,elements:l,field:e,result:v,validator:s}),v.valid?"Valid":"Invalid"});{const m=this.normalizeResult(e,s,c);return this.emit("core.validator.validated",{element:t,elements:l,field:e,result:m,validator:s}),Promise.resolve(m.valid?"Valid":"Invalid")}}getElementValue(e,t,s){const n=Y(this.form,e,t,this.elements[e]);return this.filter.execute("field-value",n,[n,e,t,s])}getElements(e){return this.elements[e]}getFields(){return this.fields}getFormElement(){return this.form}getLocale(){return this.locale}getPlugin(e){return this.plugins[e]}updateFieldStatus(e,t,s){const n=this.elements[e],l=n[0].getAttribute("type");if((l==="radio"||l==="checkbox"?[n[0]]:n).forEach(r=>this.updateElementStatus(e,r,t,s)),!s)switch(t){case"NotValidated":this.emit("core.field.notvalidated",e),this.results.delete(e);break;case"Validating":this.emit("core.field.validating",e),this.results.delete(e);break;case"Valid":this.emit("core.field.valid",e),this.results.set(e,"Valid");break;case"Invalid":this.emit("core.field.invalid",e),this.results.set(e,"Invalid");break}return this}updateElementStatus(e,t,s,n){const l=this.elements[e],a=this.fields[e].validators,r=n?[n]:Object.keys(a);switch(s){case"NotValidated":r.forEach(o=>this.emit("core.validator.notvalidated",{element:t,elements:l,field:e,validator:o})),this.emit("core.element.notvalidated",{element:t,elements:l,field:e});break;case"Validating":r.forEach(o=>this.emit("core.validator.validating",{element:t,elements:l,field:e,validator:o})),this.emit("core.element.validating",{element:t,elements:l,field:e});break;case"Valid":r.forEach(o=>this.emit("core.validator.validated",{element:t,elements:l,field:e,result:{message:a[o].message,valid:!0},validator:o})),this.emit("core.element.validated",{element:t,elements:l,field:e,valid:!0});break;case"Invalid":r.forEach(o=>this.emit("core.validator.validated",{element:t,elements:l,field:e,result:{message:a[o].message,valid:!1},validator:o})),this.emit("core.element.validated",{element:t,elements:l,field:e,valid:!1});break}return this}resetForm(e){return Object.keys(this.fields).forEach(t=>this.resetField(t,e)),this.emit("core.form.reset",{formValidation:this,reset:e}),this}resetField(e,t){if(t){const s=this.elements[e],n=s[0].getAttribute("type");s.forEach(l=>{n==="radio"||n==="checkbox"?(l.removeAttribute("selected"),l.removeAttribute("checked"),l.checked=!1):(l.setAttribute("value",""),(l instanceof HTMLInputElement||l instanceof HTMLTextAreaElement)&&(l.value=""))})}return this.updateFieldStatus(e,"NotValidated"),this.emit("core.field.reset",{field:e,reset:t}),this}revalidateField(e){return this.updateFieldStatus(e,"NotValidated"),this.validateField(e)}disableValidator(e,t){return this.toggleValidator(!1,e,t)}enableValidator(e,t){return this.toggleValidator(!0,e,t)}updateValidatorOption(e,t,s,n){return this.fields[e]&&this.fields[e].validators&&this.fields[e].validators[t]&&(this.fields[e].validators[t][s]=n),this}setFieldOptions(e,t){return this.fields[e]=t,this}destroy(){return Object.keys(this.plugins).forEach(e=>this.plugins[e].uninstall()),this.ee.clear(),this.filter.clear(),this.results.clear(),this.plugins={},this}setLocale(e,t){return this.locale=e,this.localization=t,this}waterfall(e){return e.reduce((t,s)=>t.then(n=>s().then(l=>(n.push(l),n))),Promise.resolve([]))}queryElements(e){const t=this.fields[e].selector?this.fields[e].selector.charAt(0)==="#"?`[id="${this.fields[e].selector.substring(1)}"]`:this.fields[e].selector:`[name="${e}"]`;return[].slice.call(this.form.querySelectorAll(t))}normalizeResult(e,t,s){const n=this.fields[e].validators[t];return Object.assign({},s,{message:s.message||(n?n.message:"")||(this.localization&&this.localization[t]&&this.localization[t].default?this.localization[t].default:"")||`The field ${e} is not valid`})}toggleValidator(e,t,s){const n=this.fields[t].validators;return s&&n&&n[s]?this.fields[t].validators[s].enabled=e:s||Object.keys(n).forEach(l=>this.fields[t].validators[l].enabled=e),this.updateFieldStatus(t,"NotValidated",s)}}function xe(i,e){const t=Object.assign({},{fields:{},locale:"en_US",plugins:{},init:n=>{}},e),s=new ge(i,t.fields);return s.setLocale(t.locale,t.localization),Object.keys(t.plugins).forEach(n=>s.registerPlugin(n,t.plugins[n])),Object.keys(P).forEach(n=>s.registerValidator(n,P[n])),t.init(s),Object.keys(t.fields).forEach(n=>s.addField(n,t.fields[n])),s}class R{constructor(e){this.opts=e}setCore(e){return this.core=e,this}install(){}uninstall(){}}class we extends R{constructor(e){super(e);this.handlers=[],this.timers=new Map;const t=document.createElement("div");this.defaultEvent="oninput"in t?"input":"keyup",this.opts=Object.assign({},{delay:0,event:this.defaultEvent,threshold:0},e),this.fieldAddedHandler=this.onFieldAdded.bind(this),this.fieldRemovedHandler=this.onFieldRemoved.bind(this)}install(){this.core.on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler)}uninstall(){this.handlers.forEach(e=>e.element.removeEventListener(e.event,e.handler)),this.handlers=[],this.timers.forEach(e=>window.clearTimeout(e)),this.timers.clear(),this.core.off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler)}prepareHandler(e,t){t.forEach(s=>{let n=[];if(!!this.opts.event&&this.opts.event[e]===!1)n=[];else if(!!this.opts.event&&!!this.opts.event[e])n=this.opts.event[e].split(" ");else if(typeof this.opts.event=="string"&&this.opts.event!==this.defaultEvent)n=this.opts.event.split(" ");else{const l=s.getAttribute("type"),a=s.tagName.toLowerCase();n=[l==="radio"||l==="checkbox"||l==="file"||a==="select"?"change":this.ieVersion>=10&&s.getAttribute("placeholder")?"keyup":this.defaultEvent]}n.forEach(l=>{const a=r=>this.handleEvent(r,e,s);this.handlers.push({element:s,event:l,field:e,handler:a}),s.addEventListener(l,a)})})}handleEvent(e,t,s){if(this.exceedThreshold(t,s)&&this.core.executeFilter("plugins-trigger-should-validate",!0,[t,s])){const n=()=>this.core.validateElement(t,s).then(a=>{this.core.emit("plugins.trigger.executed",{element:s,event:e,field:t})}),l=this.opts.delay[t]||this.opts.delay;if(l===0)n();else{const a=this.timers.get(s);a&&window.clearTimeout(a),this.timers.set(s,window.setTimeout(n,l*1e3))}}}onFieldAdded(e){this.handlers.filter(t=>t.field===e.field).forEach(t=>t.element.removeEventListener(t.event,t.handler)),this.prepareHandler(e.field,e.elements)}onFieldRemoved(e){this.handlers.filter(t=>t.field===e.field&&e.elements.indexOf(t.element)>=0).forEach(t=>t.element.removeEventListener(t.event,t.handler))}exceedThreshold(e,t){const s=this.opts.threshold[e]===0||this.opts.threshold===0?!1:this.opts.threshold[e]||this.opts.threshold;if(!s)return!0;const n=t.getAttribute("type");return["button","checkbox","file","hidden","image","radio","reset","submit"].indexOf(n)!==-1?!0:this.core.getElementValue(e,t).length>=s}}function ve(i,e){e.split(" ").forEach(t=>{i.classList?i.classList.add(t):` ${i.className} `.indexOf(` ${t} `)&&(i.className+=` ${t}`)})}function Ee(i,e){e.split(" ").forEach(t=>{i.classList?i.classList.remove(t):i.className=i.className.replace(t,"")})}function h(i,e){const t=[],s=[];Object.keys(e).forEach(n=>{n&&(e[n]?t.push(n):s.push(n))}),s.forEach(n=>Ee(i,n)),t.forEach(n=>ve(i,n))}function E(i,e){return i.classList?i.classList.contains(e):new RegExp(`(^| )${e}( |$)`,"gi").test(i.className)}function be(i,e){const t=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector;return t?t.call(i,e):[].slice.call(i.parentElement.querySelectorAll(e)).indexOf(i)>=0}function j(i,e){let t=i;for(;t&&!be(t,e);)t=t.parentElement;return t}class z extends R{constructor(e){super(e);this.messages=new Map,this.defaultContainer=document.createElement("div"),this.opts=Object.assign({},{container:(t,s)=>this.defaultContainer},e),this.elementIgnoredHandler=this.onElementIgnored.bind(this),this.fieldAddedHandler=this.onFieldAdded.bind(this),this.fieldRemovedHandler=this.onFieldRemoved.bind(this),this.validatorValidatedHandler=this.onValidatorValidated.bind(this),this.validatorNotValidatedHandler=this.onValidatorNotValidated.bind(this)}static getClosestContainer(e,t,s){let n=e;for(;n&&!(n===t||(n=n.parentElement,s.test(n.className))););return n}install(){this.core.getFormElement().appendChild(this.defaultContainer),this.core.on("core.element.ignored",this.elementIgnoredHandler).on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler).on("core.validator.validated",this.validatorValidatedHandler).on("core.validator.notvalidated",this.validatorNotValidatedHandler)}uninstall(){this.core.getFormElement().removeChild(this.defaultContainer),this.messages.forEach(e=>e.parentNode.removeChild(e)),this.messages.clear(),this.core.off("core.element.ignored",this.elementIgnoredHandler).off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler).off("core.validator.validated",this.validatorValidatedHandler).off("core.validator.notvalidated",this.validatorNotValidatedHandler)}onFieldAdded(e){const t=e.elements;t&&(t.forEach(s=>{const n=this.messages.get(s);n&&(n.parentNode.removeChild(n),this.messages.delete(s))}),this.prepareFieldContainer(e.field,t))}onFieldRemoved(e){if(!e.elements.length||!e.field)return;const t=e.elements[0].getAttribute("type");(t==="radio"||t==="checkbox"?[e.elements[0]]:e.elements).forEach(n=>{if(this.messages.has(n)){const l=this.messages.get(n);l.parentNode.removeChild(l),this.messages.delete(n)}})}prepareFieldContainer(e,t){if(t.length){const s=t[0].getAttribute("type");s==="radio"||s==="checkbox"?this.prepareElementContainer(e,t[0],t):t.forEach(n=>this.prepareElementContainer(e,n,t))}}prepareElementContainer(e,t,s){let n;if(typeof this.opts.container=="string"){const a=this.opts.container.charAt(0)==="#"?`[id="${this.opts.container.substring(1)}"]`:this.opts.container;n=this.core.getFormElement().querySelector(a)}else n=this.opts.container(e,t);const l=document.createElement("div");n.appendChild(l),h(l,{"fv-plugins-message-container":!0}),this.core.emit("plugins.message.placed",{element:t,elements:s,field:e,messageElement:l}),this.messages.set(t,l)}getMessage(e){return typeof e.message=="string"?e.message:e.message[this.core.getLocale()]}onValidatorValidated(e){const t=e.elements,s=e.element.getAttribute("type"),n=(s==="radio"||s==="checkbox")&&t.length>0?t[0]:e.element;if(this.messages.has(n)){const l=this.messages.get(n),a=l.querySelector(`[data-field="${e.field}"][data-validator="${e.validator}"]`);if(!a&&!e.result.valid){const r=document.createElement("div");r.innerHTML=this.getMessage(e.result),r.setAttribute("data-field",e.field),r.setAttribute("data-validator",e.validator),this.opts.clazz&&h(r,{[this.opts.clazz]:!0}),l.appendChild(r),this.core.emit("plugins.message.displayed",{element:e.element,field:e.field,message:e.result.message,messageElement:r,meta:e.result.meta,validator:e.validator})}else a&&!e.result.valid?(a.innerHTML=this.getMessage(e.result),this.core.emit("plugins.message.displayed",{element:e.element,field:e.field,message:e.result.message,messageElement:a,meta:e.result.meta,validator:e.validator})):a&&e.result.valid&&l.removeChild(a)}}onValidatorNotValidated(e){const t=e.elements,s=e.element.getAttribute("type"),n=s==="radio"||s==="checkbox"?t[0]:e.element;if(this.messages.has(n)){const l=this.messages.get(n),a=l.querySelector(`[data-field="${e.field}"][data-validator="${e.validator}"]`);a&&l.removeChild(a)}}onElementIgnored(e){const t=e.elements,s=e.element.getAttribute("type"),n=s==="radio"||s==="checkbox"?t[0]:e.element;if(this.messages.has(n)){const l=this.messages.get(n);[].slice.call(l.querySelectorAll(`[data-field="${e.field}"]`)).forEach(r=>{l.removeChild(r)})}}}class $e extends R{constructor(e){super(e);this.results=new Map,this.containers=new Map,this.opts=Object.assign({},{defaultMessageContainer:!0,eleInvalidClass:"",eleValidClass:"",rowClasses:"",rowValidatingClass:""},e),this.elementIgnoredHandler=this.onElementIgnored.bind(this),this.elementValidatingHandler=this.onElementValidating.bind(this),this.elementValidatedHandler=this.onElementValidated.bind(this),this.elementNotValidatedHandler=this.onElementNotValidated.bind(this),this.iconPlacedHandler=this.onIconPlaced.bind(this),this.fieldAddedHandler=this.onFieldAdded.bind(this),this.fieldRemovedHandler=this.onFieldRemoved.bind(this),this.messagePlacedHandler=this.onMessagePlaced.bind(this)}install(){h(this.core.getFormElement(),{[this.opts.formClass]:!0,"fv-plugins-framework":!0}),this.core.on("core.element.ignored",this.elementIgnoredHandler).on("core.element.validating",this.elementValidatingHandler).on("core.element.validated",this.elementValidatedHandler).on("core.element.notvalidated",this.elementNotValidatedHandler).on("plugins.icon.placed",this.iconPlacedHandler).on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler),this.opts.defaultMessageContainer&&(this.core.registerPlugin("___frameworkMessage",new z({clazz:this.opts.messageClass,container:(e,t)=>{const s=typeof this.opts.rowSelector=="string"?this.opts.rowSelector:this.opts.rowSelector(e,t),n=j(t,s);return z.getClosestContainer(t,n,this.opts.rowPattern)}})),this.core.on("plugins.message.placed",this.messagePlacedHandler))}uninstall(){this.results.clear(),this.containers.clear(),h(this.core.getFormElement(),{[this.opts.formClass]:!1,"fv-plugins-framework":!1}),this.core.off("core.element.ignored",this.elementIgnoredHandler).off("core.element.validating",this.elementValidatingHandler).off("core.element.validated",this.elementValidatedHandler).off("core.element.notvalidated",this.elementNotValidatedHandler).off("plugins.icon.placed",this.iconPlacedHandler).off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler),this.opts.defaultMessageContainer&&this.core.off("plugins.message.placed",this.messagePlacedHandler)}onIconPlaced(e){}onMessagePlaced(e){}onFieldAdded(e){const t=e.elements;t&&(t.forEach(s=>{const n=this.containers.get(s);n&&(h(n,{[this.opts.rowInvalidClass]:!1,[this.opts.rowValidatingClass]:!1,[this.opts.rowValidClass]:!1,"fv-plugins-icon-container":!1}),this.containers.delete(s))}),this.prepareFieldContainer(e.field,t))}onFieldRemoved(e){e.elements.forEach(t=>{const s=this.containers.get(t);s&&h(s,{[this.opts.rowInvalidClass]:!1,[this.opts.rowValidatingClass]:!1,[this.opts.rowValidClass]:!1})})}prepareFieldContainer(e,t){if(t.length){const s=t[0].getAttribute("type");s==="radio"||s==="checkbox"?this.prepareElementContainer(e,t[0]):t.forEach(n=>this.prepareElementContainer(e,n))}}prepareElementContainer(e,t){const s=typeof this.opts.rowSelector=="string"?this.opts.rowSelector:this.opts.rowSelector(e,t),n=j(t,s);n!==t&&(h(n,{[this.opts.rowClasses]:!0,"fv-plugins-icon-container":!0}),this.containers.set(t,n))}onElementValidating(e){const t=e.elements,s=e.element.getAttribute("type"),n=s==="radio"||s==="checkbox"?t[0]:e.element,l=this.containers.get(n);l&&h(l,{[this.opts.rowInvalidClass]:!1,[this.opts.rowValidatingClass]:!0,[this.opts.rowValidClass]:!1})}onElementNotValidated(e){this.removeClasses(e.element,e.elements)}onElementIgnored(e){this.removeClasses(e.element,e.elements)}removeClasses(e,t){const s=e.getAttribute("type"),n=s==="radio"||s==="checkbox"?t[0]:e;t.forEach(a=>{h(a,{[this.opts.eleValidClass]:!1,[this.opts.eleInvalidClass]:!1})});const l=this.containers.get(n);l&&h(l,{[this.opts.rowInvalidClass]:!1,[this.opts.rowValidatingClass]:!1,[this.opts.rowValidClass]:!1})}onElementValidated(e){const t=e.elements,s=e.element.getAttribute("type"),n=s==="radio"||s==="checkbox"?t[0]:e.element;t.forEach(a=>{h(a,{[this.opts.eleValidClass]:e.valid,[this.opts.eleInvalidClass]:!e.valid})});const l=this.containers.get(n);if(l)if(!e.valid)this.results.set(n,!1),h(l,{[this.opts.rowInvalidClass]:!0,[this.opts.rowValidatingClass]:!1,[this.opts.rowValidClass]:!1});else{this.results.delete(n);let a=!0;this.containers.forEach((r,o)=>{r===l&&this.results.get(o)===!1&&(a=!1)}),a&&h(l,{[this.opts.rowInvalidClass]:!1,[this.opts.rowValidatingClass]:!1,[this.opts.rowValidClass]:!0})}}}class Ie extends $e{constructor(e){super(Object.assign({},{eleInvalidClass:"is-invalid",eleValidClass:"is-valid",formClass:"fv-plugins-bootstrap5",rowInvalidClass:"fv-plugins-bootstrap5-row-invalid",rowPattern:/^(.*)(col|offset)(-(sm|md|lg|xl))*-[0-9]+(.*)$/,rowSelector:".row",rowValidClass:"fv-plugins-bootstrap5-row-valid"},e));this.eleValidatedHandler=this.handleElementValidated.bind(this)}install(){super.install(),this.core.on("core.element.validated",this.eleValidatedHandler)}uninstall(){super.install(),this.core.off("core.element.validated",this.eleValidatedHandler)}handleElementValidated(e){const t=e.element.getAttribute("type");if((t==="checkbox"||t==="radio")&&e.elements.length>1&&E(e.element,"form-check-input")){const s=e.element.parentElement;E(s,"form-check")&&E(s,"form-check-inline")&&h(s,{"is-invalid":!e.valid,"is-valid":e.valid})}}onIconPlaced(e){h(e.element,{"fv-plugins-icon-input":!0});const t=e.element.parentElement;E(t,"input-group")&&(t.parentElement.insertBefore(e.iconElement,t.nextSibling),e.element.nextElementSibling&&E(e.element.nextElementSibling,"input-group-text")&&h(e.iconElement,{"fv-plugins-icon-input-group":!0}));const s=e.element.getAttribute("type");if(s==="checkbox"||s==="radio"){const n=t.parentElement;E(t,"form-check")?(h(e.iconElement,{"fv-plugins-icon-check":!0}),t.parentElement.insertBefore(e.iconElement,t.nextSibling)):E(t.parentElement,"form-check")&&(h(e.iconElement,{"fv-plugins-icon-check":!0}),n.parentElement.insertBefore(e.iconElement,n.nextSibling))}}onMessagePlaced(e){e.messageElement.classList.add("invalid-feedback");const t=e.element.parentElement;if(E(t,"input-group")){t.appendChild(e.messageElement),h(t,{"has-validation":!0});return}const s=e.element.getAttribute("type");(s==="checkbox"||s==="radio")&&E(e.element,"form-check-input")&&E(t,"form-check")&&!E(t,"form-check-inline")&&e.elements[e.elements.length-1].parentElement.appendChild(e.messageElement)}}export{Ie as l,xe as r,we as t};
